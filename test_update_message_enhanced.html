<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار رسالة التحديث المحسّنة - Enhanced Update Message Test</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            direction: rtl;
            text-align: right;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 20px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.2em;
        }
        
        .section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-right: 6px solid #667eea;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        .section h2 {
            color: #667eea;
            margin-top: 0;
            font-size: 1.8em;
            margin-bottom: 20px;
        }
        
        .test-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: bold;
            margin: 10px 8px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            min-width: 200px;
        }
        
        .test-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        
        .test-button:active {
            transform: translateY(-1px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }
        
        .test-button.success {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }
        
        .test-button.danger {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        }
        
        .test-button.warning {
            background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);
        }
        
        .info-box {
            background: #e7f3ff;
            border: 2px solid #2196F3;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .info-box h3 {
            color: #2196F3;
            margin-top: 0;
        }
        
        .info-box ul {
            margin: 10px 0;
            padding-right: 25px;
        }
        
        .info-box li {
            margin: 8px 0;
            line-height: 1.6;
        }
        
        .code-box {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 15px 0;
            direction: ltr;
            text-align: left;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 8px;
        }
        
        .status-indicator.success {
            background: #28a745;
            box-shadow: 0 0 10px #28a745;
        }
        
        .status-indicator.error {
            background: #dc3545;
            box-shadow: 0 0 10px #dc3545;
        }
        
        .status-indicator.warning {
            background: #ffc107;
            box-shadow: 0 0 10px #ffc107;
        }
        
        @keyframes slideDown {
            from { transform: translateX(-50%) translateY(-100%); opacity: 0; }
            to { transform: translateX(-50%) translateY(0); opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateX(-50%) translateY(0); opacity: 1; }
            to { transform: translateX(-50%) translateY(-100%); opacity: 0; }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { 
                box-shadow: 0 6px 20px rgba(0,0,0,0.4);
                transform: translateX(-50%) scale(1);
            }
            50% { 
                box-shadow: 0 8px 30px rgba(0,0,0,0.6);
                transform: translateX(-50%) scale(1.02);
            }
        }
        
        .maintenance-spinner {
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 0.8s linear infinite;
            flex-shrink: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔄 اختبار رسالة التحديث المحسّنة</h1>
        <p class="subtitle">Enhanced Update Message Testing Tool</p>
        
        <!-- Section 1: What's New -->
        <div class="section">
            <h2><span class="status-indicator success"></span>✨ التحسينات الجديدة - New Enhancements</h2>
            <div class="info-box">
                <h3>🎯 ما تم تحسينه؟</h3>
                <ul>
                    <li><strong>رسالة أكبر وأوضح:</strong> حجم خط أكبر (18px) وحشوة إضافية</li>
                    <li><strong>تأثير نبض:</strong> الرسالة تنبض لجذب الانتباه</li>
                    <li><strong>ظل أقوى:</strong> ظل أعمق لجعل الرسالة أكثر بروزاً</li>
                    <li><strong>إطار واضح:</strong> حدود بيضاء لتحديد الرسالة</li>
                    <li><strong>سجلات محسّنة:</strong> معلومات تفصيلية في Console للمطورين</li>
                    <li><strong>وظائف اختبار:</strong> دوال JavaScript لاختبار الرسالة بسهولة</li>
                </ul>
            </div>
        </div>
        
        <!-- Section 2: Testing Buttons -->
        <div class="section">
            <h2><span class="status-indicator warning"></span>🧪 اختبارات الرسالة - Message Tests</h2>
            <p style="font-size: 1.1em; margin-bottom: 20px;">اضغط على الأزرار أدناه لاختبار رسالة التحديث في سيناريوهات مختلفة:</p>
            
            <div style="text-align: center;">
                <button class="test-button" onclick="testBasicMessage()">
                    🔄 رسالة أساسية
                </button>
                
                <button class="test-button warning" onclick="testPersistentMessage()">
                    ⏱️ رسالة مستمرة (مع نبض)
                </button>
                
                <button class="test-button" onclick="testAutoHideMessage()">
                    ⏳ رسالة تختفي تلقائياً (5 ثوانٍ)
                </button>
                
                <button class="test-button success" onclick="testAllTypes()">
                    🎨 اختبار جميع الأنواع
                </button>
                
                <button class="test-button danger" onclick="hideMessage()">
                    ❌ إخفاء الرسالة
                </button>
            </div>
        </div>
        
        <!-- Section 3: Developer Functions -->
        <div class="section">
            <h2><span class="status-indicator success"></span>👨‍💻 وظائف المطور - Developer Functions</h2>
            <p style="font-size: 1.1em; margin-bottom: 20px;">يمكن استخدام هذه الدوال من Console المتصفح (F12):</p>
            
            <div class="info-box">
                <h3>📝 الدوال المتاحة:</h3>
                <ul>
                    <li><strong>window.testShowUpdateMessage()</strong> - عرض رسالة الاختبار</li>
                    <li><strong>window.testShowUpdateMessage(5)</strong> - عرض الرسالة لمدة 5 ثوانٍ</li>
                    <li><strong>window.forceCheckMaintenance()</strong> - فحص حالة الصيانة بالقوة</li>
                    <li><strong>hideMaintenanceProgress()</strong> - إخفاء الرسالة يدوياً</li>
                </ul>
            </div>
            
            <h3 style="margin-top: 25px;">💡 أمثلة الاستخدام:</h3>
            <div class="code-box">
// Test the update message (persistent)<br>
window.testShowUpdateMessage();<br>
<br>
// Test with auto-hide after 10 seconds<br>
window.testShowUpdateMessage(10);<br>
<br>
// Force check maintenance status<br>
window.forceCheckMaintenance();<br>
<br>
// Hide the message manually<br>
hideMaintenanceProgress();
            </div>
        </div>
        
        <!-- Section 4: Troubleshooting -->
        <div class="section">
            <h2><span class="status-indicator error"></span>🔧 استكشاف الأخطاء - Troubleshooting</h2>
            <div class="info-box">
                <h3>❓ الرسالة لا تظهر؟</h3>
                <ul>
                    <li>✅ افتح Console (اضغط F12)</li>
                    <li>✅ ابحث عن رسائل تبدأ بـ 📢 أو ✅</li>
                    <li>✅ تأكد أنك لست مسجل دخول كمطور (إلا إذا كنت تستخدم وظائف الاختبار)</li>
                    <li>✅ تأكد من تفعيل وضع الصيانة على GitHub</li>
                    <li>✅ جرّب مسح sessionStorage: <code>sessionStorage.clear()</code></li>
                    <li>✅ أعد تحميل الصفحة بالكامل (Ctrl+Shift+R)</li>
                </ul>
            </div>
            
            <div class="info-box" style="background: #fff3cd; border-color: #856404; margin-top: 20px;">
                <h3 style="color: #856404;">⚠️ ملاحظات مهمة:</h3>
                <ul>
                    <li>الرسالة تظهر تلقائياً عند تفعيل وضع الصيانة</li>
                    <li>المطورون لا يرون الرسالة في الوضع العادي (لديهم وصول كامل)</li>
                    <li>الرسالة تستمر حتى يغلقها المطور أو حتى إلغاء وضع الصيانة</li>
                    <li>استخدم وظائف الاختبار لمحاكاة الرسالة كمطور</li>
                </ul>
            </div>
        </div>
        
        <!-- Section 5: What Changed -->
        <div class="section">
            <h2><span class="status-indicator success"></span>📋 التغييرات التفصيلية - Detailed Changes</h2>
            <h3>1️⃣ تحسينات الأسلوب (Styling):</h3>
            <ul style="line-height: 1.8; font-size: 1.05em;">
                <li>حجم الخط: 16px → <strong>18px</strong></li>
                <li>الحشوة: 15px 25px → <strong>18px 30px</strong></li>
                <li>العرض الأدنى: 300px → <strong>350px</strong></li>
                <li>العرض الأقصى: 500px → <strong>550px</strong></li>
                <li>الظل: 0 4px 12px → <strong>0 6px 20px</strong></li>
                <li>z-index: 10000 → <strong>10001</strong></li>
                <li>إضافة: <strong>حدود بيضاء 3px</strong></li>
                <li>إضافة: <strong>تأثير نبض</strong> للرسائل المستمرة</li>
            </ul>
            
            <h3 style="margin-top: 25px;">2️⃣ تحسينات الوظائف (Functionality):</h3>
            <ul style="line-height: 1.8; font-size: 1.05em;">
                <li>إضافة سجلات Console تفصيلية</li>
                <li>إضافة التحقق من وجود الرسالة في DOM</li>
                <li>إضافة دالة testShowUpdateMessage()</li>
                <li>إضافة دالة forceCheckMaintenance()</li>
                <li>تحسين رسائل التوضيح للمطورين</li>
            </ul>
        </div>
    </div>

    <script>
        // Enhanced message display function
        function showMaintenanceProgress(message, type = 'loading', persist = false) {
            // Remove any existing maintenance progress message
            const existing = document.getElementById('maintenanceProgressMsg');
            if (existing) {
                existing.remove();
            }
            
            // Create new progress message
            const messageDiv = document.createElement('div');
            messageDiv.id = 'maintenanceProgressMsg';
            messageDiv.setAttribute('data-persist', persist.toString());
            
            // Choose background color based on type
            let bgColor = '#ffc107';
            if (type === 'success') bgColor = '#28a745';
            if (type === 'error') bgColor = '#dc3545';
            if (type === 'info') bgColor = '#17a2b8';
            if (type === 'warning') bgColor = '#ff9800';
            
            messageDiv.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: ${bgColor};
                color: white;
                padding: 18px 30px;
                border-radius: 10px;
                z-index: 10001;
                font-size: 18px;
                font-weight: bold;
                box-shadow: 0 6px 20px rgba(0,0,0,0.4);
                text-align: center;
                min-width: 350px;
                max-width: 550px;
                white-space: pre-line;
                animation: slideDown 0.3s ease-out${persist ? ', pulse 2s ease-in-out infinite' : ''};
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 12px;
                border: 3px solid rgba(255,255,255,0.3);
            `;
            
            // Add loading spinner
            if (type === 'loading' || type === 'warning') {
                const spinner = document.createElement('div');
                spinner.className = 'maintenance-spinner';
                messageDiv.appendChild(spinner);
            }
            
            const textSpan = document.createElement('span');
            textSpan.textContent = message;
            messageDiv.appendChild(textSpan);
            
            document.body.appendChild(messageDiv);
            
            console.log(`📢 Maintenance progress message shown - persist: ${persist}`);
            console.log(`📍 Message position: top: 20px, z-index: 10001`);
            console.log(`🎨 Message style: ${type} (${bgColor})`);
            console.log(`📝 Message text: ${message}`);
            
            return messageDiv;
        }
        
        function hideMaintenanceProgress() {
            const existing = document.getElementById('maintenanceProgressMsg');
            if (existing) {
                existing.style.animation = 'slideUp 0.3s ease-in';
                setTimeout(() => existing.remove(), 300);
                console.log('🗑️ Message hidden');
            }
        }
        
        // Test functions
        function testBasicMessage() {
            showMaintenanceProgress('🔄 رسالة اختبار أساسية', 'warning', false);
            setTimeout(hideMaintenanceProgress, 3000);
        }
        
        function testPersistentMessage() {
            showMaintenanceProgress('🔄 جاري التحديث...\n⏳ يرجى الانتظار\n(رسالة مستمرة مع نبض)', 'warning', true);
            console.log('💡 الرسالة المستمرة معروضة. اضغط "إخفاء الرسالة" أو انتظر 10 ثوانٍ');
            setTimeout(hideMaintenanceProgress, 10000);
        }
        
        function testAutoHideMessage() {
            showMaintenanceProgress('⏳ رسالة تختفي تلقائياً\nستختفي بعد 5 ثوانٍ', 'info', false);
            setTimeout(hideMaintenanceProgress, 5000);
        }
        
        async function testAllTypes() {
            const types = [
                { msg: '🔄 تحميل...', type: 'loading', persist: false },
                { msg: '⚠️ تحذير!', type: 'warning', persist: false },
                { msg: 'ℹ️ معلومات', type: 'info', persist: false },
                { msg: '✅ نجح!', type: 'success', persist: false },
                { msg: '❌ خطأ!', type: 'error', persist: false }
            ];
            
            for (let i = 0; i < types.length; i++) {
                showMaintenanceProgress(types[i].msg, types[i].type, types[i].persist);
                await new Promise(resolve => setTimeout(resolve, 2000));
                hideMaintenanceProgress();
                await new Promise(resolve => setTimeout(resolve, 500));
            }
        }
        
        function hideMessage() {
            hideMaintenanceProgress();
        }
        
        // Make functions available globally
        window.testShowUpdateMessage = function(duration = 0) {
            console.log('🧪 Test: Forcing update message to show...');
            showMaintenanceProgress('🔄 جاري التحديث...\n⏳ يرجى الانتظار (وضع الاختبار)', 'warning', true);
            console.log('✅ Test message shown!');
            
            if (duration > 0) {
                console.log(`⏱️ Message will auto-hide after ${duration} seconds`);
                setTimeout(() => {
                    hideMaintenanceProgress();
                    console.log('🗑️ Test message auto-hidden');
                }, duration * 1000);
            }
        };
        
        window.forceCheckMaintenance = function() {
            console.log('🔄 Force checking maintenance status...');
            alert('في التطبيق الحقيقي، سيتم فحص حالة الصيانة من GitHub الآن.\n\nIn the real app, this would check maintenance status from GitHub.');
        };
        
        console.log('%c🎉 Enhanced Update Message Test Ready!', 'color: #667eea; font-size: 18px; font-weight: bold;');
        console.log('%cAvailable functions:', 'color: #764ba2; font-size: 14px; font-weight: bold;');
        console.log('  • window.testShowUpdateMessage()');
        console.log('  • window.testShowUpdateMessage(duration)');
        console.log('  • window.forceCheckMaintenance()');
        console.log('  • hideMaintenanceProgress()');
    </script>
</body>
</html>
