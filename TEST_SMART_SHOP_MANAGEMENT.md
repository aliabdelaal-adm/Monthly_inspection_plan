# اختبار نظام إدارة المحلات الذكي - Smart Shop Management Test

## الميزات المضافة / Added Features

### 1. إدارة المحلات الشاملة / Complete Shop Management
- ✅ **عرض كامل لبيانات المحلات** - Full shop data display from shops_details.json
- ✅ **إضافة محل جديد** - Add new shop with all details
- ✅ **تعديل بيانات المحل** - Edit shop information
- ✅ **حذف محل** - Delete shop from database
- ✅ **عرض تفاصيل المحل** - View detailed shop information

### 2. ربط المحلات بالمناطق / Shop-Area Linking
- ✅ **عرض المحلات حسب المنطقة** - Display shops filtered by area
- ✅ **تحديث تلقائي للمحلات عند اختيار المنطقة** - Auto-update shops when area is selected
- ✅ **عرض تفاصيل كاملة لكل محل في المنطقة** - Show complete details for each shop in area

### 3. الحفظ الذكي / Smart Saving
- ✅ **حفظ التغييرات في shops_details.json** - Save changes to shops_details.json
- ✅ **حفظ متزامن لكل من plan-data.json و shops_details.json** - Synchronized save of both files
- ✅ **تشفير UTF-8 الصحيح للنصوص العربية** - Proper UTF-8 encoding for Arabic text

## كيفية الاستخدام / How to Use

### إضافة محل جديد / Add New Shop
1. افتح لوحة التحكم (admin-dashboard.html)
2. اذهب إلى قسم "إدارة المحلات"
3. اضغط على زر "إضافة محل جديد"
4. املأ البيانات المطلوبة:
   - اسم المحل (عربي) - مطلوب
   - اسم المحل (إنجليزي)
   - المنطقة - مطلوب
   - رقم الرخصة
   - رقم الهاتف
   - النشاط
   - كود ADM
   - رابط الموقع
5. اضغط "حفظ المحل"
6. اضغط "حفظ في GitHub" لحفظ التغييرات

### تعديل محل موجود / Edit Existing Shop
1. في قائمة المحلات، اضغط على زر "تعديل" للمحل المطلوب
2. عدّل البيانات المطلوبة
3. اضغط "حفظ التعديلات"
4. اضغط "حفظ في GitHub" لحفظ التغييرات

### عرض المحلات حسب المنطقة / View Shops by Area
1. اذهب إلى قسم "إدارة المناطق"
2. في قسم "ربط المناطق بالمحلات"
3. اختر منطقة من القائمة المنسدلة
4. سيتم عرض جميع المحلات في هذه المنطقة تلقائياً مع:
   - رقم الرخصة
   - رقم الهاتف
   - النشاط
   - رابط الموقع على الخريطة

### حذف محل / Delete Shop
1. في قائمة المحلات، اضغط على زر "حذف" للمحل المطلوب
2. أكد عملية الحذف
3. اضغط "حفظ في GitHub" لحفظ التغييرات

## الملفات المعدلة / Modified Files

### admin-dashboard.html
- تحديث دالة `loadShopsList()` لاستخدام shops_details.json
- تحديث دالة `filterShopsByArea()` لعرض تفاصيل كاملة من shops_details.json
- تحديث دالة `populateAreaFilter()` لجمع المناطق من مصادر متعددة
- إضافة دالة `viewShopDetails()` لعرض تفاصيل المحل
- إضافة دالة `editShopDetails()` لتعديل بيانات المحل
- إضافة دالة `saveShopDetails()` لحفظ التعديلات
- إضافة دالة `deleteShopFromDetails()` لحذف المحل
- إضافة دالة `saveShopsDetailsToGitHub()` لحفظ shops_details.json
- تحديث دالة `addShop()` وإضافة `saveNewShopToDetails()`
- تحديث دالة `saveShopsToGitHub()` لحفظ كلا الملفين

## البنية التقنية / Technical Structure

### مصادر البيانات / Data Sources
1. **shops_details.json** - قاعدة البيانات الرئيسية للمحلات
   - يحتوي على جميع تفاصيل المحل
   - يتم تحديثه عند إضافة/تعديل/حذف محل

2. **plan-data.json** - بيانات خطط التفتيش
   - يحتوي على العلاقات بين المفتشين والمناطق والمحلات
   - يتم تحديثه تلقائياً عند تغيير اسم محل

### التكامل / Integration
- تكامل كامل بين shops_details.json و plan-data.json
- تحديث تلقائي لجميع المراجع عند تعديل اسم محل
- حفظ متزامن لكلا الملفين

## الاختبار / Testing

### خطوات الاختبار
1. ✅ افتح admin-dashboard.html في المتصفح
2. ✅ أدخل GitHub Token
3. ✅ اذهب إلى قسم "إدارة المحلات"
4. ✅ تحقق من عرض قائمة المحلات مع التفاصيل
5. ✅ اختبر إضافة محل جديد
6. ✅ اختبر تعديل محل موجود
7. ✅ اختبر عرض تفاصيل المحل
8. ✅ اذهب إلى قسم "إدارة المناطق"
9. ✅ اختبر عرض المحلات حسب المنطقة
10. ✅ تحقق من عرض التفاصيل الكاملة لكل محل
11. ✅ اختبر حفظ التغييرات في GitHub

## الملاحظات / Notes

- جميع الوظائف تعمل بشكل متزامن (async) لتحسين الأداء
- دعم كامل للنصوص العربية مع ترميز UTF-8
- واجهة مستخدم محسّنة مع تصميم جذاب
- رسائل تأكيد واضحة للمستخدم
- سجل نشاط Activity Log يسجل جميع العمليات

## التحسينات المستقبلية / Future Improvements

- [ ] إضافة خاصية البحث المتقدم في المحلات
- [ ] إضافة خاصية التصفية حسب النشاط
- [ ] إضافة خاصية استيراد/تصدير البيانات
- [ ] إضافة خاصية الطباعة للتقارير
- [ ] إضافة إحصائيات تفصيلية لكل منطقة
