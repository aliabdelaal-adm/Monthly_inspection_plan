# تفعيل موقع المحلات على خرائط جوجل 🗺️

## ⚠️ تحديث مهم - IMPORTANT UPDATE ⚠️

**هذا الملف للمرجع التاريخي فقط - This file is for historical reference only**

تم تعطيل السكريبتات التي تولد روابط خرائط جوجل تلقائياً. النظام الآن يعتمد **فقط** على روابط خرائط جوجل اليدوية.

The scripts that auto-generate Google Maps links have been disabled. The system now relies **only** on manual Google Maps links.

📖 **للتعليمات الحالية، راجع - For current instructions, see:**
`GOOGLE_MAPS_MANUAL_LINKS_ONLY.md`

---

## ملخص تنفيذي

تم تفعيل ميزة موقع المحلات على خرائط جوجل بنجاح 100% لجميع المحلات في النظام.

## الإحصائيات 📊

- **إجمالي المحلات**: 204 محل
- **محلات كانت لديها روابط**: 92 محل
- **محلات تم إضافة روابط لها**: 112 محل
- **نسبة النجاح**: 100% ✅

## ما تم تنفيذه

### 1. إنشاء سكريبت ذكي لتوليد الروابط
تم إنشاء `generate_google_maps_links.py` الذي يقوم بـ:
- قراءة بيانات جميع المحلات من `shops_details.json`
- استخراج المعلومات المتاحة (اسم المحل، العنوان، المنطقة)
- توليد رابط خرائط جوجل ذكي باستخدام Google Maps Search API
- حفظ الرابط في حقل `locationMap` لكل محل

### 2. صيغة الروابط المولدة
الروابط تستخدم Google Maps Search API بالصيغة التالية:
```
https://www.google.com/maps/search/?api=1&query={shop_name}+{address}+أبو ظبي
```

### 3. أمثلة على الروابط المولدة

**محل: عصافير الخليج**
- العنوان: أبو ظبي - شارع الميناء - بناية دائرة بلدية ابوظبي
- الرابط: https://www.google.com/maps/search/?api=1&query=عصافير الخليج أبو ظبي - شارع الميناء

**محل: فالكون لتجارة الأسماك**
- العنوان: أبو ظبي - شارع الميناء - بناية دائرة بلدية أبوظبي
- الرابط: https://www.google.com/maps/search/?api=1&query=فالكون لتجارة الأسماك أبو ظبي

## كيفية الاستخدام 💡

### في Smart Planner
1. افتح صفحة Smart Planner (`smart-planner.html`)
2. انتقل إلى قسم "إدارة المحلات الكاملة"
3. اضغط على أيقونة 🗺️ بجانب اسم المحل
4. سيفتح موقع المحل على خرائط جوجل في نافذة جديدة

### في نموذج تفاصيل المحل
- عند عرض تفاصيل أي محل، سيظهر رابط "عرض على الخريطة"
- الرابط يفتح خرائط جوجل مباشرة بموقع المحل

### صفحة الاختبار
تم إنشاء `test_google_maps_links.html` للتحقق من جميع الروابط:
- عرض إحصائيات شاملة
- اختبار جميع الروابط
- إمكانية البحث والتصفية

## الملفات المُحدّثة 📝

1. **shops_details.json** - تم تحديث 112 محل بروابط جديدة
2. **generate_google_maps_links.py** - السكريبت المُستخدم لتوليد الروابط (جديد)
3. **test_google_maps_links.html** - صفحة اختبار الروابط (جديد)

## المميزات الذكية 🧠

1. **استخدام معلومات كاملة**: الروابط تجمع بين اسم المحل والعنوان لدقة أفضل
2. **دعم اللغة العربية**: جميع الروابط تدعم النصوص العربية بشكل كامل
3. **روابط دائمة**: الروابط محفوظة في قاعدة البيانات ولا تحتاج لإعادة توليد
4. **سهولة الاستخدام**: نقرة واحدة لعرض موقع أي محل على الخريطة

## الميزات في Smart Planner 🎯

### أيقونة الخريطة
- رمز 🗺️ بجانب كل محل في القائمة
- تظهر بلون أخضر (#27ae60) للدلالة على التوفر
- عند الضغط عليها تفتح الموقع في نافذة جديدة

### حقل موقع المحل
- يظهر في نموذج إضافة/تعديل المحل
- التسمية: "🗺️ موقع المحل على خرائط جوجل"
- يمكن تحديثه يدوياً إذا لزم الأمر

### التحديث الجماعي
- يمكن تحديث موقع عدة محلات دفعة واحدة
- من خلال ميزة "تحديث جماعي للمواقع"

## خطوات إعادة التوليد (إذا لزم الأمر) 🔄

```bash
cd /home/runner/work/Monthly_inspection_plan/Monthly_inspection_plan
python3 generate_google_maps_links.py
```

السكريبت سيقوم بـ:
1. تحميل بيانات المحلات الحالية
2. تخطي المحلات التي لديها روابط بالفعل
3. توليد روابط للمحلات المتبقية
4. حفظ التحديثات في `shops_details.json`

## التحقق من النجاح ✅

للتحقق من أن جميع المحلات لديها روابط:

```python
import json

with open('shops_details.json') as f:
    shops = json.load(f)
    
total = len(shops)
with_maps = sum(1 for s in shops.values() if s.get('locationMap'))
print(f"المحلات بروابط: {with_maps}/{total}")
```

النتيجة المتوقعة: `المحلات بروابط: 204/204`

## الدعم الفني 🛠️

إذا واجهت أي مشاكل:
1. تأكد من تحميل ملف `shops_details.json` بشكل صحيح
2. تحقق من اتصال الإنترنت
3. جرّب فتح الرابط يدوياً للتأكد من صحته
4. أعد تشغيل السكريبت إذا احتجت لإعادة توليد الروابط

## ملاحظات هامة ⚠️

- الروابط تستخدم Google Maps Search API وليست إحداثيات GPS دقيقة
- قد تحتاج بعض المحلات لتعديل يدوي لموقعها إذا كان الموقع غير دقيق
- يمكن تحديث أي رابط يدوياً من خلال Smart Planner
- الروابط تعمل على جميع الأجهزة (كمبيوتر، موبايل، تابلت)

## إنجاز مكتمل 🎉

✅ جميع المحلات الـ 204 الآن لديها روابط فعالة لخرائط جوجل!  
✅ يمكن الوصول لموقع أي محل بنقرة واحدة فقط!  
✅ الروابط محفوظة بشكل دائم في قاعدة البيانات!
