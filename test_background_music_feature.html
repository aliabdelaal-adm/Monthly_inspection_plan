<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø®Ù„ÙÙŠØ© - Background Music Test</title>
    <style>
        body {
            font-family: 'Cairo', Arial, sans-serif;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .info-box {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }
        .test-area {
            width: 80%;
            max-width: 600px;
            background: rgba(255,255,255,0.2);
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        .test-area:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.02);
        }
        button {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            margin: 10px;
            font-weight: bold;
        }
        button:hover {
            background: #218838;
        }
        .status {
            margin: 20px 0;
            padding: 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            font-size: 1.1em;
        }
        #log {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0,0,0,0.5);
            border-radius: 8px;
            max-height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.9em;
            text-align: left;
        }
    </style>
</head>
<body>
    <h1>ğŸµ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ø§Ù„Ø®Ù„ÙÙŠØ©</h1>
    <h2>Background Music Test</h2>
    
    <div class="info-box">
        <h3>ÙƒÙŠÙÙŠØ© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± - How to Test:</h3>
        <ol style="text-align: right;">
            <li>Ø§Ù†Ù‚Ø± ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù† Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰</li>
            <li>Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ ØªØ¹Ù…Ù„ Ø¨ØµÙˆØª Ù‡Ø§Ø¯Ø¦ Ø¬Ø¯Ø§Ù‹ (5%)</li>
            <li>Ø³ÙˆÙ ØªØªÙˆÙ‚Ù ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ø­Ø¯Ø©</li>
            <li>Ø§Ù†Ù‚Ø± Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø³ØªÙƒÙ…Ø§Ù„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù…Ù† Ù†ÙØ³ Ø§Ù„Ù†Ù‚Ø·Ø©</li>
        </ol>
        <ol style="text-align: left;">
            <li>Click anywhere on the page to start music</li>
            <li>Music plays at very low volume (5%)</li>
            <li>It will auto-stop after 1 minute</li>
            <li>Click again to resume from where it stopped</li>
        </ol>
    </div>

    <div class="test-area" id="clickArea">
        <h2>ğŸ‘† Ø§Ù†Ù‚Ø± Ù‡Ù†Ø§ Ù„ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰</h2>
        <h3>Click here to play/pause music</h3>
        <div class="status" id="status">â¹ï¸ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù…ØªÙˆÙ‚ÙØ© - Music stopped</div>
    </div>

    <div>
        <button onclick="window.stopBackgroundMusic()">â¹ï¸ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ - Stop Music</button>
        <button onclick="window.toggleBackgroundMusic()">ğŸµ ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ - Toggle Music</button>
    </div>

    <div id="log"></div>

    <!-- Background music audio element -->
    <audio id="backgroundMusicAudio" preload="metadata" playsinline webkit-playsinline style="display:none;">
        <source src="Classical-Music-for-Relaxation-Mozart-Bach-Tchaikovsky...-128Kbps-44KHz(mp3)1Ø§Ù„Ø¬Ø²Ø¡(4).mp3" type="audio/mpeg">
    </audio>

    <script>
        // Background Music System
        let backgroundMusicTimer = null;
        let backgroundMusicPlaying = false;
        
        function addLog(message) {
            const log = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString('ar-EG');
            log.innerHTML = `[${timestamp}] ${message}<br>` + log.innerHTML;
        }
        
        function updateStatus(message) {
            document.getElementById('status').textContent = message;
        }

        function toggleBackgroundMusic() {
            const audio = document.getElementById('backgroundMusicAudio');
            
            if (!audio) {
                addLog('âš ï¸ Background music audio element not found');
                return;
            }
            
            if (audio.paused) {
                audio.volume = 0.05; // Very low volume (5%)
                audio.play().then(() => {
                    backgroundMusicPlaying = true;
                    const position = audio.currentTime.toFixed(2);
                    addLog(`ğŸµ Background music started/resumed at position: ${position} seconds`);
                    updateStatus(`ğŸµ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ ØªØ¹Ù…Ù„ - Music playing (${position}s)`);
                    
                    clearTimeout(backgroundMusicTimer);
                    backgroundMusicTimer = setTimeout(() => {
                        audio.pause();
                        backgroundMusicPlaying = false;
                        const finalPosition = audio.currentTime.toFixed(2);
                        addLog(`â¸ï¸ Background music paused automatically after 1 minute at position: ${finalPosition} seconds`);
                        updateStatus(`â¸ï¸ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù…ØªÙˆÙ‚ÙØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ - Auto-paused (${finalPosition}s)`);
                    }, 60000); // 60 seconds = 1 minute
                }).catch(error => {
                    addLog('âš ï¸ Could not play background music: ' + error);
                    backgroundMusicPlaying = false;
                    updateStatus('âš ï¸ Ø®Ø·Ø£ - Error playing music');
                });
            } else {
                audio.pause();
                clearTimeout(backgroundMusicTimer);
                backgroundMusicPlaying = false;
                const position = audio.currentTime.toFixed(2);
                addLog(`â¸ï¸ Background music paused at position: ${position} seconds`);
                updateStatus(`â¸ï¸ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù…ØªÙˆÙ‚ÙØ© - Music paused (${position}s)`);
            }
        }

        function setupBackgroundMusicClickHandler() {
            document.addEventListener('click', function(event) {
                const targetElement = event.target;
                const isButton = targetElement.tagName === 'BUTTON' || targetElement.closest('button');
                const isInput = targetElement.tagName === 'INPUT' || targetElement.tagName === 'SELECT' || targetElement.tagName === 'TEXTAREA';
                const isLink = targetElement.tagName === 'A' || targetElement.closest('a');
                
                if (!isButton && !isInput && !isLink) {
                    toggleBackgroundMusic();
                }
            }, { passive: true });
            
            addLog('ğŸµ Background music click handler initialized');
        }

        window.toggleBackgroundMusic = toggleBackgroundMusic;
        window.stopBackgroundMusic = function() {
            const audio = document.getElementById('backgroundMusicAudio');
            if (audio) {
                audio.pause();
                clearTimeout(backgroundMusicTimer);
                backgroundMusicPlaying = false;
                const position = audio.currentTime.toFixed(2);
                addLog(`â¹ï¸ Background music stopped at position: ${position} seconds`);
                updateStatus(`â¹ï¸ Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù…ØªÙˆÙ‚ÙØ© - Music stopped (${position}s)`);
            }
        };

        window.addEventListener('load', function() {
            setupBackgroundMusicClickHandler();
            addLog('âœ… Test page loaded - Click anywhere to start music');
        });
    </script>
</body>
</html>
