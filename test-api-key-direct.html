<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Google Maps API / Test Google Maps API</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            direction: rtl;
        }
        #map {
            height: 400px;
            width: 100%;
            margin: 20px 0;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .warning { background: #fff3cd; color: #856404; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>Ø§Ø®ØªØ¨Ø§Ø± Google Maps API</h1>
    <h2>Test Google Maps API</h2>
    
    <div id="status"></div>
    
    <h3>Ø§Ù„Ø®Ø±ÙŠØ·Ø© / Map</h3>
    <div id="map"></div>
    
    <h3>Ø§Ù„ØªÙØ§ØµÙŠÙ„ / Details</h3>
    <pre id="details"></pre>
    
    <script>
        const API_KEY = 'AIzaSyBIu6hLqc2mW6WYKTf1JCMSjKCkN1E-xVU';
        const statusDiv = document.getElementById('status');
        const detailsDiv = document.getElementById('details');
        
        function logStatus(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.textContent = message;
            statusDiv.appendChild(div);
            console.log(`[${type}] ${message}`);
        }
        
        function logDetails(key, value) {
            detailsDiv.textContent += `${key}: ${value}\n`;
        }
        
        // Test 1: Check API key format
        logStatus('ğŸ” Ø§Ø®ØªØ¨Ø§Ø± 1: ÙØ­Øµ ØªÙ†Ø³ÙŠÙ‚ Ù…ÙØªØ§Ø­ API', 'info');
        logDetails('API Key', API_KEY);
        
        if (API_KEY.startsWith('AIza')) {
            logStatus('âœ… ØªÙ†Ø³ÙŠÙ‚ Ù…ÙØªØ§Ø­ API ÙŠØ¨Ø¯Ùˆ ØµØ­ÙŠØ­Ø§Ù‹', 'success');
            logDetails('Key Format', 'âœ… Valid');
        } else {
            logStatus('âŒ ØªÙ†Ø³ÙŠÙ‚ Ù…ÙØªØ§Ø­ API ØºÙŠØ± ØµØ­ÙŠØ­', 'error');
            logDetails('Key Format', 'âŒ Invalid');
        }
        
        // Test 2: Load Google Maps API
        logStatus('ğŸ” Ø§Ø®ØªØ¨Ø§Ø± 2: ØªØ­Ù…ÙŠÙ„ Google Maps API...', 'info');
        
        window.initMap = function() {
            logStatus('âœ… ØªÙ… Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ initMap', 'success');
            
            // Test 3: Check if google.maps is available
            if (typeof google === 'undefined') {
                logStatus('âŒ google ØºÙŠØ± Ù…Ø¹Ø±Ù‘Ù', 'error');
                logDetails('google', 'âŒ undefined');
                return;
            }
            logStatus('âœ… google Ù…Ø¹Ø±Ù‘Ù', 'success');
            logDetails('google', 'âœ… defined');
            
            if (typeof google.maps === 'undefined') {
                logStatus('âŒ google.maps ØºÙŠØ± Ù…Ø¹Ø±Ù‘Ù', 'error');
                logDetails('google.maps', 'âŒ undefined');
                return;
            }
            logStatus('âœ… google.maps Ù…Ø¹Ø±Ù‘Ù', 'success');
            logDetails('google.maps', 'âœ… defined');
            
            // Test 4: Create map
            try {
                logStatus('ğŸ” Ø§Ø®ØªØ¨Ø§Ø± 3: Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø®Ø±ÙŠØ·Ø©...', 'info');
                const map = new google.maps.Map(document.getElementById('map'), {
                    center: { lat: 24.4539, lng: 54.3773 }, // Abu Dhabi
                    zoom: 12
                });
                logStatus('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                logDetails('Map Creation', 'âœ… Success');
                
                // Test 5: Add marker
                const marker = new google.maps.Marker({
                    position: { lat: 24.4539, lng: 54.3773 },
                    map: map,
                    title: 'Ø£Ø¨ÙˆØ¸Ø¨ÙŠ / Abu Dhabi'
                });
                logStatus('âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¹Ù„Ø§Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                logDetails('Marker Creation', 'âœ… Success');
                
                logStatus('ğŸ‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù†Ø¬Ø­Øª! Ø§Ù„Ø®Ø±Ø§Ø¦Ø· ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­', 'success');
            } catch (error) {
                logStatus(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø®Ø±ÙŠØ·Ø©: ${error.message}`, 'error');
                logDetails('Map Creation Error', error.message);
                console.error('Map creation error:', error);
            }
        };
        
        window.gm_authFailure = function() {
            logStatus('âŒ ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…ÙØªØ§Ø­ API', 'error');
            logStatus('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù†:', 'warning');
            logStatus('1. Ù‡Ù„ Ù…ÙØªØ§Ø­ API ØµØ­ÙŠØ­ØŸ', 'warning');
            logStatus('2. Ù‡Ù„ ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙÙˆØªØ±Ø© ÙÙŠ Google CloudØŸ', 'warning');
            logStatus('3. Ù‡Ù„ ØªÙ… ØªÙØ¹ÙŠÙ„ Maps JavaScript APIØŸ', 'warning');
            logStatus('4. Ù‡Ù„ Ø§Ù„Ù†Ø·Ø§Ù‚ Ù…Ø³Ù…ÙˆØ­ ÙÙŠ Ù‚ÙŠÙˆØ¯ APIØŸ', 'warning');
            logDetails('Authentication', 'âŒ Failed');
        };
        
        // Load the Google Maps script
        const script = document.createElement('script');
        script.src = `https://maps.googleapis.com/maps/api/js?key=${API_KEY}&callback=initMap&libraries=places,geocoding`;
        script.async = true;
        script.defer = true;
        
        script.onerror = function() {
            logStatus('âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø³ÙƒØ±ÙŠØ¨Øª Google Maps', 'error');
            logDetails('Script Loading', 'âŒ Failed');
        };
        
        document.head.appendChild(script);
        logStatus('â³ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Google Maps API...', 'info');
    </script>
</body>
</html>
