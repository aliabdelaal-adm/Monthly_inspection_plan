<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ÙˆØ§Ø¬Ù‡Ø© Ø¥Ø¯Ø§Ø±Ø© Ø®Ø·Ø© Ø§Ù„ØªÙØªÙŠØ´ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
            font-family: 'Cairo', Tahoma, Arial, sans-serif;
            background: #f7f8fa;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 1100px;
            margin: 40px auto 24px auto;
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 4px 32px #0002;
            padding: 32px 24px 24px 24px;
            direction: rtl;
        }
        .main-title {
            background: #234093;
            color: #fff;
            border-radius: 10px;
            padding: 18px 0;
            text-align: center;
            font-size: 2em;
            margin-bottom: 24px;
            letter-spacing: 1px;
        }
        @media print {
            .shop-btn {
                display: none !important;
            }
            .shops-list-print {
                display: block !important;
            }
            .main-title {
                font-size: 1.5em;
                margin-bottom: 20px;
            }
            .top-bar {
                display: none !important;
            }
            .api-token-bar {
                display: none !important;
            }
            .modal-overlay {
                display: none !important;
            }
        }
        .shops-list-print {
            display: none;
            font-size: 0.9em;
            line-height: 1.4;
            white-space: pre-line;
        }
        .top-bar {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 18px;
            gap: 1.5rem;
            direction: rtl;
        }
        .top-bar label, .top-bar .user-type-label {
            font-size: 1.1em;
            margin-left: 8px;
        }
        .top-bar select, .top-bar button {
            font-size: 1em;
            border-radius: 7px;
            border: 1px solid #ccc;
            padding: 8px 14px;
            margin-right: 8px;
        }
        .top-bar button {
            background: #234093;
            color: #fff;
            border: none;
            margin: 0 4px;
            cursor: pointer;
            transition: 0.2s;
        }
        .top-bar button:hover {
            background: #1a2c67;
        }
        .api-token-bar {
            margin-bottom: 18px;
            text-align: left;
            direction: ltr;
            padding: 8px 12px;
            background: #e6eeff;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1em;
        }
        .api-token-bar label {
            font-size: 1.06em;
            color: #234093;
            margin-left: 8px;
        }
        .api-token-bar input[type="password"], .api-token-bar input[type="text"] {
            border: 1px solid #bbb;
            border-radius: 5px;
            padding: 6px 10px;
            font-size: 1em;
            width: 240px;
        }
        .api-token-bar button {
            background: #234093;
            color: #fff;
            border: none;
            border-radius: 6px;
            padding: 6px 18px;
            font-size: 1em;
            cursor: pointer;
        }
        .api-token-bar .api-token-saved {
            color: #388e3c;
            margin-right: 8px;
        }
        .api-token-bar .api-token-warning {
            color: #d32f2f;
            margin-right: 8px;
        }
        .admin-panel {
            margin: 32px 0 32px 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 28px;
        }
        .admin-section {
            background: #f3f6fe;
            border: 1px solid #e0e7f7;
            border-radius: 14px;
            padding: 24px 18px 18px 18px;
            box-shadow: 0px 1.5px 6px #23409311;
            margin-bottom: 24px;
        }
        .admin-section h3 {
            color: #1a2c67;
            margin-top: 0;
            font-size: 1.13em;
            margin-bottom: 18px;
        }
        .add-row-form {
            display: flex;
            gap: 8px;
            margin-bottom: 18px;
            align-items: center;
        }
        .add-row-form input[type="text"] {
            flex: 1;
            font-size: 1em;
            padding: 6px 10px;
            border-radius: 6px;
            border: 1px solid #bbb;
        }
        .add-row-form button {
            background: #234093;
            color: #fff;
            border: none;
            padding: 6px 14px;
            border-radius: 6px;
            font-size: 1em;
            cursor: pointer;
            transition: 0.2s;
        }
        .admin-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .admin-list li {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #fff;
            margin-bottom: 7px;
            border-radius: 7px;
            padding: 7px 10px;
            border: 1px solid #e3e6f0;
        }
        .admin-list .list-actions button {
            margin-right: 5px;
            font-size: 0.97em;
            padding: 4px 12px;
            border-radius: 5px;
        }
        .edit-btn {
            background: #efb400;
            color: #fff;
            border: none;
        }
        .edit-btn:hover {
            background: #b28a00;
        }
        .save-btn {
            background: #388e3c;
            color: #fff;
            border: none;
        }
        .delete-btn {
            background: #d32f2f;
            color: #fff;
            border: none;
        }
        .delete-btn:hover {
            background: #b71c1c;
        }
        .goal-section {
            background: #e5f7ef;
            border: 1px solid #81c6ae;
            border-radius: 14px;
            padding: 24px 18px 18px 18px;
            box-shadow: 0px 1.5px 6px #046a4433;
            margin-top: 30px;
        }
        .goal-section h3 {
            color: #046a44;
            margin-top: 0;
            font-size: 1.13em;
            margin-bottom: 18px;
        }
        .goal-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .goal-list li {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #fff;
            margin-bottom: 7px;
            border-radius: 7px;
            padding: 7px 10px;
            border: 1px solid #b2dfdb;
        }
        .goal-list .list-actions button {
            margin-right: 5px;
            font-size: 0.97em;
            padding: 4px 12px;
            border-radius: 5px;
        }
        .goal-edit-btn {
            background: #009688;
            color: #fff;
        }
        .goal-save-btn {
            background: #388e3c;
            color: #fff;
        }
        .goal-delete-btn {
            background: #d32f2f;
            color: #fff;
        }
        .goal-delete-btn:hover {
            background: #b71c1c;
        }
        .shops-area-box {
            background: #e9ebf6;
            border-radius: 10px;
            padding: 18px 10px 10px 10px;
            margin-bottom: 20px;
        }
        .shops-area-title {
            font-size: 1.07em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .shop-area-tag {
            background: #234093;
            color: #fff;
            border-radius: 18px;
            padding: 4px 16px 4px 16px;
            display: inline-block;
            margin: 2px 4px;
        }
        .shop-area-tag button {
            background: #c22;
            color: #fff;
            border: none;
            border-radius: 50%;
            margin-right: 4px;
            font-size: 1.1em;
            cursor: pointer;
        }
        .distribution-table th, .distribution-table td {
            text-align: center;
            padding: 7px 6px;
        }
        .distribution-table th {
            background: #234093;
            color: #fff;
        }
        .distribution-table td button {
            background: #c22;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            padding: 4px 10px;
        }
        .section-box {
            background: #f4f6fa;
            border-radius: 14px;
            margin-bottom: 30px;
            box-shadow: 0px 1.5px 6px #23409311;
        }
        .table-title, .stats-title {
            color: #c00;
            font-size: 1.15em;
            font-weight: bold;
            margin: 16px 0 8px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: #fff;
            margin-bottom: 10px;
        }
        th, td {
            border: 1px solid #bbb;
            padding: 12px 6px;
            text-align: center;
            vertical-align: middle;
            font-size: 1.09em;
        }
        th {
            background: #234093;
            color: #fff;
        }
        .shop-btn {
            background: #e5eaff;
            color: #234093;
            border: none;
            border-radius: 7px;
            padding: 6px 16px;
            cursor: pointer;
            font-size: 1em;
            transition: 0.2s;
        }
        .shop-btn:hover {
            background: #b2c5fa;
        }
        .goals-section {
            background: #e5f7ef;
            border: 1px solid #81c6ae;
            border-radius: 14px;
            padding: 16px 12px 10px 12px;
            margin-bottom: 15px;
        }
        .goals-section h3 {
            color: #046a44;
            margin: 0 0 10px 0;
            font-size: 1.1em;
        }
        .goals-section ul {
            margin: 0;
            padding-right: 20px;
        }
        .goals-section li {
            color: #046a44;
            margin-bottom: 4px;
            font-size: 1.01em;
        }
        .stats-table {
            width: 100%;
            border-collapse: collapse;
            border-radius: 8px;
            background: #fff;
            margin-bottom: 12px;
            overflow: hidden;
        }
        .stats-table th, .stats-table td {
            border: 1px solid #234093;
            padding: 12px 8px;
            text-align: center;
            font-size: 1em;
            width: 25%;
        }
        .stats-table th {
            background: #234093;
            color: #fff;
            font-size: 0.85em;
            font-weight: bold;
        }
        .stats-table tfoot td {
            background: #e8f4f8;
            font-weight: bold;
            color: #234093;
            border: 2px solid #234093;
            font-size: 1.1em;
        }
        .stats-total-cell {
            color: #c00;
            font-weight: bold;
        }
        #inspectionTable th, #inspectionTable td {
            text-align: center;
            padding: 12px 8px;
            border: 1px solid #ddd;
            width: 25%;
        }
        #inspectionTable th {
            background: #234093;
            color: #fff;
            font-weight: bold;
        }
        #inspectionTable tbody tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        #inspectionTable tbody tr:hover {
            background-color: #e8f4f8;
        }
        .copyright {
            text-align: center;
            color: #234093;
            font-weight: bold;
            margin-top: 20px;
            font-size: 1.08em;
        }
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.36);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal-content {
            background: #fff;
            padding: 32px 26px 22px 26px;
            border-radius: 18px;
            box-shadow: 0 2px 16px #0002;
            min-width: 260px;
            max-width: 350px;
            text-align: center;
        }
        .modal-content button {
            background: #234093;
            color: #fff;
            border: none;
            padding: 8px 22px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            margin-top: 10px;
        }
        .modal-content label {
            font-size: 1.08em;
            color: #234093;
            margin-bottom: 16px;
            display: block;
        }
        .modal-content input[type="password"] {
            font-size: 1.08em;
            padding: 7px 12px;
            border: 1.5px solid #ccc;
            border-radius: 8px;
            margin-bottom: 14px;
            text-align: center;
        }
        .modal-content .error-msg {
            color: #d32f2f;
            margin-bottom: 8px;
        }
        @media (max-width: 900px) {
            .container { padding: 14px 2px 8px 2px; }
            .main-title { font-size: 1.22em; padding: 11px 0; }
            .admin-panel { grid-template-columns: 1fr; gap: 16px; }
            .admin-section, .goal-section, .inspect-section, .section-box { padding: 13px 4px 13px 4px;}
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-title">
            Ø®Ø·Ø© Ø§Ù„ØªÙØªÙŠØ´ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©
        </div>
        <div class="top-bar">
            <div>
                <span class="user-type-label">Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</span>
                <select id="userTypeSelect" onchange="handleUserTypeChange()">
                    <option value="inspector">Ù…ÙØªØ´</option>
                    <option value="developer">Ø§Ù„Ù…Ø·ÙˆØ±</option>
                </select>
                <span id="inspectorSelectBox" style="display:inline-block;">
                    <label for="inspectorSelect">Ø§Ø³Ù… Ø§Ù„Ù…ÙØªØ´:</label>
                    <select id="inspectorSelect" onchange="renderInspectorPage()"></select>
                </span>
                <button onclick="window.print()">Ø·Ø¨Ø§Ø¹Ø© Ø£Ùˆ Ø­ÙØ¸ PDF</button>
                <button id="bellButton" onclick="playBirdSound()" title="ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ø¹ØµØ§ÙÙŠØ±" style="background: #228B22; margin-right: 10px;">ğŸ””</button>
            </div>
        </div>
        <div id="apiTokenBar" class="api-token-bar" style="display:none;">
            <label for="apiTokenInput">API Token:</label>
            <input type="password" id="apiTokenInput" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„ØªÙˆÙƒÙŠÙ† Ù‡Ù†Ø§" autocomplete="off" />
            <button type="button" id="saveApiTokenBtn">Ø­ÙØ¸ Ø§Ù„ØªÙˆÙƒÙŠÙ†</button>
            <span id="apiTokenSavedMsg" class="api-token-saved" style="display:none;">ØªÙ… Ø§Ù„Ø­ÙØ¸ âœ“</span>
            <button type="button" id="toggleApiTokenInputBtn" style="background:#888;" title="Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡">ğŸ‘ï¸</button>
        </div>
        <div id="adminPanel" style="display:none;">
            <div class="admin-panel">
                <div class="admin-section">
                    <h3>Ø¥Ø¯Ø§Ø±Ø© Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…ÙØªØ´ÙŠÙ†</h3>
                    <form class="add-row-form" id="addInspectorForm">
                        <input type="text" id="newInspector" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ÙØªØ´ Ø§Ù„Ø¬Ø¯ÙŠØ¯" required />
                        <button type="submit">Ø¥Ø¶Ø§ÙØ©</button>
                    </form>
                    <ul class="admin-list" id="inspectorList"></ul>
                </div>
                <div class="admin-section">
                    <h3>Ø¥Ø¯Ø§Ø±Ø© Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ø­Ù„Ø§Øª</h3>
                    <form class="add-row-form" id="addShopForm">
                        <input type="text" id="newShop" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯" required />
                        <button type="submit">Ø¥Ø¶Ø§ÙØ©</button>
                    </form>
                    <ul class="admin-list" id="shopList"></ul>
                </div>
                <div class="admin-section">
                    <h3>Ø¥Ø¯Ø§Ø±Ø© Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚</h3>
                    <form class="add-row-form" id="addAreaForm">
                        <input type="text" id="newArea" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©" required />
                        <button type="submit">Ø¥Ø¶Ø§ÙØ©</button>
                    </form>
                    <ul class="admin-list" id="areaList"></ul>
                </div>
            </div>
            <div class="goal-section">
                <h3>Ø¥Ø¯Ø§Ø±Ø© Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ØªÙØªÙŠØ´</h3>
                <form class="add-row-form" id="addGoalForm">
                    <input type="text" id="newGoal" placeholder="Ù‡Ø¯Ù Ø¬Ø¯ÙŠØ¯..." required />
                    <button type="submit">Ø¥Ø¶Ø§ÙØ©</button>
                </form>
                <ul class="goal-list" id="goalList"></ul>
            </div>
            <div class="admin-section shops-area-box">
                <div class="shops-area-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ù„Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©:</div>
                <div id="shopsByAreaList"></div>
                <form class="add-row-form" id="addShopByAreaForm" style="margin-top:8px;">
                    <input type="text" id="newShopByArea" placeholder="Ø§Ø³Ù… Ù…Ø­Ù„ Ø¬Ø¯ÙŠØ¯" required />
                    <select id="areaForShop"></select>
                    <button type="submit">Ø¥Ø¶Ø§ÙØ© Ù…Ø­Ù„</button>
                </form>
            </div>
            <div class="admin-section shops-area-box">
                <div class="shops-area-title">ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø­Ù„Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙØªØ´ÙŠÙ† ÙˆØ§Ù„Ø£ÙŠØ§Ù…:</div>
                <table class="distribution-table" style="width:100%;margin-bottom:10px;">
                    <thead>
                        <tr>
                            <th>Ø§Ù„Ù…ÙØªØ´</th>
                            <th>Ø§Ù„ÙŠÙˆÙ…</th>
                            <th>Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</th>
                            <th>Ø§Ù„Ù…Ø­Ù„</th>
                            <th>Ø­Ø°Ù</th>
                        </tr>
                    </thead>
                    <tbody id="distributionTableBody"></tbody>
                </table>
                <button onclick="addDistributionRow()" style="margin-bottom: 8px;">Ø¥Ø¶Ø§ÙØ© ØµÙ</button>
                <button onclick="autoDistributeShops()" style="background:#234093;color:#fff;">ØªÙˆØ²ÙŠØ¹ ØªÙ„Ù‚Ø§Ø¦ÙŠ</button>
                <br>
                <button onclick="saveDistributionToFile()" style="background:#223;color:#fff;font-size:1.1em;padding:9px 18px;margin-top:12px;">Ø­ÙØ¸ Ø§Ù„Ø®Ø·Ø© (ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù)</button>
                <button onclick="uploadDistributionToGitHub()" style="background:#19b55b;color:#fff;font-size:1.1em;padding:9px 18px;margin-top:12px;">Ø­ÙØ¸ ÙˆØ±ÙØ¹ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¥Ù„Ù‰ GitHub</button>
            </div>
        </div>
        <div id="inspectorPage">
            <div class="section-box">
                <div class="table-title">Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªÙØªÙŠØ´</div>
                <table id="inspectionTable">
                    <thead>
                        <tr>
                            <th>Ø§Ù„ÙŠÙˆÙ…</th>
                            <th>ÙˆÙ‚Øª Ø§Ù„Ù…Ù†Ø§ÙˆØ¨Ø©</th>
                            <th>Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</th>
                            <th>Ø§Ù„Ù…Ø­Ù„Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
            <div class="section-box">
                <div class="stats-title">Ø§Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªÙØªÙŠØ´</div>
                <table class="stats-table" id="inspectorStatsTable">
                    <thead>
                        <tr>
                            <th>Ø¹Ø¯Ø¯ Ø§Ù„ØªÙØªÙŠØ´Ø§Øª (ÙƒÙ„ Ø§Ù„Ø´Ù‡Ø±)</th>
                            <th>Ø¹Ø¯Ø¯ Ø§Ù„ØªÙØªÙŠØ´Ø§Øª Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©</th>
                            <th>Ø¹Ø¯Ø¯ Ø§Ù„ØªÙØªÙŠØ´Ø§Øª Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠØ©</th>
                            <th>Ø¹Ø¯Ø¯ Ø§Ù„ØªÙØªÙŠØ´Ø§Øª ÙÙŠ Ø§Ù„Ø¹Ø·Ù„Ø© (Ø¬Ù…Ø¹Ø©/Ø³Ø¨Øª/Ø£Ø­Ø¯)</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
            <div class="goals-section">
                <h3>Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ØªÙØªÙŠØ´ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±:</h3>
                <ul id="goalsList"></ul>
            </div>
            <div class="copyright">
                Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© &copy; Ø§Ù„Ù…Ø·ÙˆØ± Ø¯. Ø¹Ù„ÙŠ Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø§Ù„
            </div>
        </div>
    </div>
    <div id="shopsModal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <h4>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ù„Ø§Øª</h4>
            <ul id="shopsList"></ul>
            <button onclick="closeShopsModal()">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>
    <div id="modalPassword" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <label>Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ù„Ù„Ù…Ø·ÙˆØ±:</label>
            <input type="password" id="passwordInput" maxlength="10" autocomplete="off" />
            <div class="error-msg" id="passwordError" style="display:none;">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­!</div>
            <button onclick="checkPassword()">Ø¯Ø®ÙˆÙ„</button>
        </div>
    </div>
    <audio id="birds-audio" src="https://cdn.pixabay.com/audio/2022/07/26/audio_124bfa5c1c.mp3"></audio>
    <script>
        // =============== API Token LocalStorage ===============
        function showApiTokenBar(show) {
            document.getElementById('apiTokenBar').style.display = show ? '' : 'none';
        }
        function getApiToken() {
            return localStorage.getItem('api_token') || '';
        }
        function setApiToken(token) {
            if(token) localStorage.setItem('api_token', token);
        }
        function handleDeveloperApiTokenBar() {
            showApiTokenBar(true);
            const apiTokenInput = document.getElementById('apiTokenInput');
            const savedToken = getApiToken();
            if(savedToken){
                apiTokenInput.value = savedToken;
                apiTokenInput.type = "password";
                document.getElementById('apiTokenSavedMsg').style.display = '';
            } else {
                apiTokenInput.value = '';
                document.getElementById('apiTokenSavedMsg').style.display = 'none';
            }
        }
        document.addEventListener('DOMContentLoaded', function(){
            document.getElementById('saveApiTokenBtn').onclick = function(){
                const val = document.getElementById('apiTokenInput').value.trim();
                if(val){
                    setApiToken(val);
                    document.getElementById('apiTokenSavedMsg').style.display = '';
                }
            };
            document.getElementById('toggleApiTokenInputBtn').onclick = function(){
                const inp = document.getElementById('apiTokenInput');
                inp.type = (inp.type === "password") ? "text" : "password";
            };
        });
        // =================== Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙ„ÙŠØ© ÙˆØªØ·Ø¨ÙŠÙ‚ ===================
        let inspectors = [
            "Ù‡Ø§Ø¬Ø±","Ø¢Ù…Ù†Ù‡","Ø¢ÙŠÙ‡","Ø¯. ÙØ§ÙŠØ² Ø§Ù„Ù…Ø³Ø§Ù„Ù…Ø©","Ø¯.Ø¢Ù…Ù†Ù‡ Ø¨Ù† ØµØ±Ù…"
        ];
        let shops = [
            "Ù…Ø­Ù„ 1", "Ù…Ø­Ù„ 2", "Ù…Ø­Ù„ 3", "Ù…Ø­Ù„ 4",
            "Ù…Ø­Ù„ 5", "Ù…Ø­Ù„ 6", "Ù…Ø­Ù„ 7", "Ù…Ø­Ù„ 8",
            "Ù…Ø­Ù„ 9", "Ù…Ø­Ù„ 10", "Ù…Ø­Ù„ 11"
        ];
        let areas = [
            "Ø§Ù„Ù…ØµÙØ­", "Ù…Ø¯ÙŠÙ†Ø© Ø®Ù„ÙŠÙØ©", "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø£", "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø¨", "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø¬", "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø¯"
        ];
        let goals = [
            "Ø¶Ù…Ø§Ù† Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",
            "Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ø§Ø´ØªØ±Ø§Ø·Ø§Øª Ø§Ù„ØµØ­ÙŠØ©"
        ];
        let inspectionData = [
            { inspector: "Ù‡Ø§Ø¬Ø±", day: "2025-09-22", shift: "ØµØ¨Ø§Ø­ÙŠØ©", area: "Ø§Ù„Ù…ØµÙØ­", shops: ["Ù…Ø­Ù„ 1", "Ù…Ø­Ù„ 2"] },
            { inspector: "Ø¢Ù…Ù†Ù‡", day: "2025-09-25", shift: "Ù…Ø³Ø§Ø¦ÙŠØ©", area: "Ù…Ø¯ÙŠÙ†Ø© Ø®Ù„ÙŠÙØ©", shops: ["Ù…Ø­Ù„ 3", "Ù…Ø­Ù„ 4"] },
            { inspector: "Ø¢ÙŠÙ‡", day: "2025-09-22", shift: "ØµØ¨Ø§Ø­ÙŠØ©", area: "Ø§Ù„Ù…ØµÙØ­", shops: ["Ù…Ø­Ù„ 5"] },
            { inspector: "Ø¯. ÙØ§ÙŠØ² Ø§Ù„Ù…Ø³Ø§Ù„Ù…Ø©", day: "2025-09-21", shift: "ØµØ¨Ø§Ø­ÙŠØ©", area: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø£", shops: ["Ù…Ø­Ù„ 6", "Ù…Ø­Ù„ 7"] },
            { inspector: "Ø¯. ÙØ§ÙŠØ² Ø§Ù„Ù…Ø³Ø§Ù„Ù…Ø©", day: "2025-09-27", shift: "ØµØ¨Ø§Ø­ÙŠØ©", area: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø¨", shops: ["Ù…Ø­Ù„ 8"] },
            { inspector: "Ø¯.Ø¢Ù…Ù†Ù‡ Ø¨Ù† ØµØ±Ù…", day: "2025-09-21", shift: "Ù…Ø³Ø§Ø¦ÙŠØ©", area: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø¬", shops: ["Ù…Ø­Ù„ 9"] },
            { inspector: "Ø¯.Ø¢Ù…Ù†Ù‡ Ø¨Ù† ØµØ±Ù…", day: "2025-09-28", shift: "Ù…Ø³Ø§Ø¦ÙŠØ©", area: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø¯", shops: ["Ù…Ø­Ù„ 10", "Ù…Ø­Ù„ 11"] }
        ];
        const weekendDays = [5, 6, 0];
        let shopsByArea = {};
        function fillShopsByAreaDefault() {
            if (Object.keys(shopsByArea).length === 0) {
                let ai = 0;
                shops.forEach(shop => {
                    let area = areas[ai % areas.length];
                    if (!shopsByArea[area]) shopsByArea[area] = [];
                    shopsByArea[area].push(shop);
                    ai++;
                });
            }
        }
        function renderShopsByArea() {
            fillShopsByAreaDefault();
            const container = document.getElementById('shopsByAreaList');
            container.innerHTML = '';
            for(let area of areas){
                const shopsList = shopsByArea[area] || [];
                let html = `<div style="margin-bottom:5px;"><b>${area}:</b> `;
                shopsList.forEach((shop,idx)=>{
                    html += `<span class="shop-area-tag">
                                ${shop}
                                <button onclick="deleteShopFromArea('${area}',${idx})">&times;</button>
                             </span>`;
                });
                html += '</div>';
                container.innerHTML += html;
            }
            const sel = document.getElementById('areaForShop');
            sel.innerHTML = '';
            areas.forEach(area=>{
                const opt = document.createElement('option');
                opt.value = area;
                opt.textContent = area;
                sel.appendChild(opt);
            });
        }
        function addShopByArea(e) {
            e.preventDefault();
            const shopName = document.getElementById('newShopByArea').value.trim();
            const area = document.getElementById('areaForShop').value;
            if(shopName && area){
                if(!shopsByArea[area]) shopsByArea[area] = [];
                if(!shopsByArea[area].includes(shopName)){
                    shopsByArea[area].push(shopName);
                    if (!shops.includes(shopName)) shops.push(shopName);
                    renderShopsByArea();
                    updateShopList();
                }
            }
            document.getElementById('newShopByArea').value = '';
        }
        function deleteShopFromArea(area, idx) {
            if(confirm("Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø­Ù„ Ù…Ù† Ø§Ù„Ù…Ù†Ø·Ù‚Ø©ØŸ")){
                const shopName = shopsByArea[area][idx];
                shopsByArea[area].splice(idx,1);
                renderShopsByArea();
                let used = false;
                for (let a in shopsByArea)
                    if (shopsByArea[a].includes(shopName)) used = true;
                if (!used) {
                    const i = shops.indexOf(shopName);
                    if (i > -1) shops.splice(i,1);
                    updateShopList();
                }
            }
        }
        let distributionRows = [];
        function renderDistributionTable() {
            const tbody = document.getElementById('distributionTableBody');
            tbody.innerHTML = '';
            distributionRows.forEach((row, idx) => {
                let inspectorSelect = `<select onchange="distributionRows[${idx}].inspector=this.value; renderDistributionTable()">
                    <option value=""></option>
                    ${inspectors.map(inspector =>
                        `<option value="${inspector}" ${row.inspector===inspector?'selected':''}>${inspector}</option>`
                    ).join('')}
                </select>`;
                let areaSelect = `<select onchange="distributionRows[${idx}].area=this.value; distributionRows[${idx}].shop=[]; renderDistributionTable()">
                    <option value=""></option>
                    ${areas.map(area =>
                        `<option value="${area}" ${row.area===area?'selected':''}>${area}</option>`
                    ).join('')}
                </select>`;
                let areaShops = (shopsByArea[row.area] || []);
                let shopSelect = `<select multiple size="3" onchange="handleShopMultiSelect(this,${idx})" style="width:100%;">
                    ${areaShops.map(shop =>
                        `<option value="${shop}" ${row.shop && row.shop.includes(shop)?'selected':''}>${shop}</option>`
                    ).join('')}
                </select>`;
                tbody.innerHTML += `
                    <tr>
                        <td>${inspectorSelect}</td>
                        <td><input type="date" value="${row.day||''}" onchange="distributionRows[${idx}].day=this.value"></td>
                        <td>${areaSelect}</td>
                        <td>${shopSelect}</td>
                        <td><button onclick="deleteDistributionRow(${idx})">Ø­Ø°Ù</button></td>
                    </tr>
                `;
            });
        }
        function handleShopMultiSelect(sel, idx) {
            const selected = Array.from(sel.selectedOptions).map(opt=>opt.value);
            distributionRows[idx].shop = selected;
        }
        function addDistributionRow() {
            distributionRows.push({inspector:'', day:'', area:'', shop:[]});
            renderDistributionTable();
        }
        function deleteDistributionRow(idx) {
            distributionRows.splice(idx,1);
            renderDistributionTable();
        }
        function autoDistributeShops() {
            distributionRows = [];
            let allShops = [];
            for(let area in shopsByArea){
                shopsByArea[area].forEach(shop=>{
                    allShops.push({area, shop});
                });
            }
            let allInspectors = inspectors.slice();
            if(allInspectors.length === 0 || allShops.length === 0) return alert("ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØ© Ù…ÙØªØ´ÙŠÙ† ÙˆÙ…Ø­Ù„Ø§Øª Ø£ÙˆÙ„Ø§Ù‹");
            let numDays = 7;
            let today = new Date();
            for(let dayIdx=0; dayIdx<numDays; dayIdx++) {
                let dateStr = new Date(today.getFullYear(), today.getMonth(), today.getDate()+dayIdx).toISOString().slice(0,10);
                for(let i=0; i<allShops.length; i++) {
                    let inspector = allInspectors[(i+dayIdx)%allInspectors.length];
                    distributionRows.push({
                        inspector,
                        day: dateStr,
                        area: allShops[i].area,
                        shop: [allShops[i].shop],
                    });
                }
            }
            renderDistributionTable();
        }
        function saveDistributionToFile() {
            let csv = "Ø§Ù„Ù…ÙØªØ´,Ø§Ù„ÙŠÙˆÙ…,Ø§Ù„Ù…Ù†Ø·Ù‚Ø©,Ø§Ù„Ù…Ø­Ù„Ø§Øª\n";
            distributionRows.forEach(row=>{
                csv += `${row.inspector},${row.day},${row.area},"${(row.shop||[]).join(' - ')}"\n`;
            });
            let blob = new Blob([csv], {type:"text/csv"});
            let a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = "Ø¬Ø¯ÙˆÙ„_ØªÙˆØ²ÙŠØ¹_Ø§Ù„Ù…Ø­Ù„Ø§Øª.csv";
            a.click();
        }
        // =========== ØªÙØ¹ÙŠÙ„ Ø±ÙØ¹ ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø­Ù„Ø§Øª Ø¥Ù„Ù‰ GitHub Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªÙˆÙƒÙŠÙ† ===========
        function uploadDistributionToGitHub() {
            const token = getApiToken();
            if (!token) {
                alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙˆØ­ÙØ¸ Ø§Ù„ØªÙˆÙƒÙŠÙ† Ø£ÙˆÙ„Ø§Ù‹!");
                return;
            }
            let csv = "Ø§Ù„Ù…ÙØªØ´,Ø§Ù„ÙŠÙˆÙ…,Ø§Ù„Ù…Ù†Ø·Ù‚Ø©,Ø§Ù„Ù…Ø­Ù„Ø§Øª\n";
            distributionRows.forEach(row=>{
                csv += `${row.inspector},${row.day},${row.area},"${(row.shop||[]).join(' - ')}"\n`;
            });
            const owner = "aliabdelaal-adm";
            const repo = "Monthly_inspection_plan";
            const path = "distribution_table.csv";
            const message = "Ø±ÙØ¹ ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ø­Ù„Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©";
            const content = btoa(unescape(encodeURIComponent(csv)));
            fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}`, {
                headers: { "Authorization": `token ${token}` }
            })
            .then(resp => {
                if (resp.status === 404) return { sha: undefined };
                return resp.json();
            })
            .then(data => {
                const sha = data && data.sha ? data.sha : undefined;
                return fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}`, {
                    method: "PUT",
                    headers: {
                        "Authorization": `token ${token}`,
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        message: message,
                        content: content,
                        sha: sha
                    })
                });
            })
            .then(resp => resp.json())
            .then(result => {
                if(result.content) {
                    alert("ØªÙ… Ø±ÙØ¹ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­ Ø¥Ù„Ù‰ GitHub!");
                } else {
                    throw new Error(result.message || "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø±ÙØ¹");
                }
            })
            .catch(err => {
                alert("Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù Ø¥Ù„Ù‰ GitHub:\n" + (err.message || err));
            });
        }
        // =====================================================
        function renderList(list, arr, itemKey, editFunc, saveFunc, deleteFunc) {
            list.innerHTML = "";
            arr.forEach((name, idx) => {
                let li = document.createElement("li");
                li.id = `${itemKey}-item-${idx}`;
                li.innerHTML = `
                    <span class="${itemKey}-name">${name}</span>
                    <span class="list-actions">
                        <button class="edit-btn" onclick="${editFunc}(${idx})">ØªØ¹Ø¯ÙŠÙ„</button>
                        <button class="delete-btn" onclick="${deleteFunc}(${idx})">Ø­Ø°Ù</button>
                    </span>
                `;
                list.appendChild(li);
            });
        }
        function updateInspectorList() {
            const list = document.getElementById('inspectorList');
            renderList(list, inspectors, 'inspector', 'startEditInspector', 'saveEditInspector', 'deleteInspector');
            fillInspectorsSelect();
        }
        function addInspector(e) {
            e.preventDefault();
            const val = document.getElementById('newInspector').value.trim();
            if(val && !inspectors.includes(val)) {
                inspectors.push(val);
                updateInspectorList();
                fillInspectorsSelect();
            }
            document.getElementById('newInspector').value = '';
        }
        function startEditInspector(idx) {
            const item = document.getElementById(`inspector-item-${idx}`);
            item.innerHTML = `
                <input type="text" id="editInspectorInput${idx}" value="${inspectors[idx]}" style="flex:1;padding:4px 8px;border-radius:5px;border:1px solid #bbb;">
                <span class="list-actions">
                    <button class="save-btn" onclick="saveEditInspector(${idx})">Ø­ÙØ¸</button>
                    <button class="delete-btn" onclick="deleteInspector(${idx})">Ø­Ø°Ù</button>
                </span>
            `;
            document.getElementById(`editInspectorInput${idx}`).focus();
        }
        function saveEditInspector(idx) {
            const val = document.getElementById(`editInspectorInput${idx}`).value.trim();
            if(val && !inspectors.includes(val)) {
                inspectors[idx] = val;
                updateInspectorList();
                fillInspectorsSelect();
            }
        }
        function deleteInspector(idx) {
            if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ÙØªØ´ØŸ")) {
                inspectors.splice(idx,1);
                updateInspectorList();
                fillInspectorsSelect();
            }
        }
        function updateShopList() {
            const list = document.getElementById('shopList');
            renderList(list, shops, 'shop', 'startEditShop', 'saveEditShop', 'deleteShop');
        }
        function addShop(e) {
            e.preventDefault();
            const val = document.getElementById('newShop').value.trim();
            if(val && !shops.includes(val)) {
                shops.push(val);
                updateShopList();
            }
            document.getElementById('newShop').value = '';
        }
        function startEditShop(idx) {
            const item = document.getElementById(`shop-item-${idx}`);
            item.innerHTML = `
                <input type="text" id="editShopInput${idx}" value="${shops[idx]}" style="flex:1;padding:4px 8px;border-radius:5px;border:1px solid #bbb;">
                <span class="list-actions">
                    <button class="save-btn" onclick="saveEditShop(${idx})">Ø­ÙØ¸</button>
                    <button class="delete-btn" onclick="deleteShop(${idx})">Ø­Ø°Ù</button>
                </span>
            `;
            document.getElementById(`editShopInput${idx}`).focus();
        }
        function saveEditShop(idx) {
            const val = document.getElementById(`editShopInput${idx}`).value.trim();
            if(val && !shops.includes(val)) {
                shops[idx] = val;
                updateShopList();
            }
        }
        function deleteShop(idx) {
            if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø­Ù„ØŸ")) {
                shops.splice(idx,1);
                updateShopList();
            }
        }
        function updateAreaList() {
            const list = document.getElementById('areaList');
            renderList(list, areas, 'area', 'startEditArea', 'saveEditArea', 'deleteArea');
        }
        function addArea(e) {
            e.preventDefault();
            const val = document.getElementById('newArea').value.trim();
            if(val && !areas.includes(val)) {
                areas.push(val);
                updateAreaList();
            }
            document.getElementById('newArea').value = '';
        }
        function startEditArea(idx) {
            const item = document.getElementById(`area-item-${idx}`);
            item.innerHTML = `
                <input type="text" id="editAreaInput${idx}" value="${areas[idx]}" style="flex:1;padding:4px 8px;border-radius:5px;border:1px solid #bbb;">
                <span class="list-actions">
                    <button class="save-btn" onclick="saveEditArea(${idx})">Ø­ÙØ¸</button>
                    <button class="delete-btn" onclick="deleteArea(${idx})">Ø­Ø°Ù</button>
                </span>
            `;
            document.getElementById(`editAreaInput${idx}`).focus();
        }
        function saveEditArea(idx) {
            const val = document.getElementById(`editAreaInput${idx}`).value.trim();
            if(val && !areas.includes(val)) {
                areas[idx] = val;
                updateAreaList();
            }
        }
        function deleteArea(idx) {
            if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©ØŸ")) {
                areas.splice(idx,1);
                updateAreaList();
            }
        }
        function renderGoalList() {
            const list = document.getElementById('goalList');
            list.innerHTML = "";
            goals.forEach((name, idx) => {
                let li = document.createElement("li");
                li.id = `goal-item-${idx}`;
                li.innerHTML = `
                    <span class="goal-name">${name}</span>
                    <span class="list-actions">
                        <button class="goal-edit-btn" onclick="startEditGoal(${idx})">ØªØ¹Ø¯ÙŠÙ„</button>
                        <button class="goal-delete-btn" onclick="deleteGoal(${idx})">Ø­Ø°Ù</button>
                    </span>
                `;
                list.appendChild(li);
            });
        }
        function addGoal(e) {
            e.preventDefault();
            const val = document.getElementById('newGoal').value.trim();
            if(val && !goals.includes(val)) {
                goals.push(val);
                renderGoalList();
            }
            document.getElementById('newGoal').value = '';
        }
        function startEditGoal(idx) {
            const item = document.getElementById(`goal-item-${idx}`);
            item.innerHTML = `
                <input type="text" id="editGoalInput${idx}" value="${goals[idx]}" style="flex:1;padding:4px 8px;border-radius:5px;border:1px solid #bbb;">
                <span class="list-actions">
                    <button class="goal-save-btn" onclick="saveEditGoal(${idx})">Ø­ÙØ¸</button>
                    <button class="goal-delete-btn" onclick="deleteGoal(${idx})">Ø­Ø°Ù</button>
                </span>
            `;
            document.getElementById(`editGoalInput${idx}`).focus();
        }
        function saveEditGoal(idx) {
            const val = document.getElementById(`editGoalInput${idx}`).value.trim();
            if(val && !goals.includes(val)) {
                goals[idx] = val;
                renderGoalList();
            }
        }
        function deleteGoal(idx) {
            if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù‡Ø¯ÙØŸ")) {
                goals.splice(idx,1);
                renderGoalList();
            }
        }
        function fillInspectorsSelect() {
            const sel = document.getElementById('inspectorSelect');
            sel.innerHTML = "";
            inspectors.forEach(name => {
                const opt = document.createElement('option');
                opt.value = name;
                opt.textContent = name;
                sel.appendChild(opt);
            });
        }
        function renderInspectionTable(inspector) {
            const tbody = document.getElementById('inspectionTable').querySelector('tbody');
            tbody.innerHTML = "";
            const rows = inspectionData.filter(item => item.inspector === inspector);
            if(rows.length === 0) {
                tbody.innerHTML = `<tr><td colspan="4">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… ØªÙØªÙŠØ´ Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…ÙØªØ´.</td></tr>`;
                return;
            }
            rows.forEach((row, idx) => {
                const tr = document.createElement('tr');
                const shopsList = row.shops.join('\n');
                tr.innerHTML = `
                    <td>${row.day}</td>
                    <td>${row.shift}</td>
                    <td>${row.area}</td>
                    <td>
                        <div class="shops-list-print">${shopsList}</div>
                    </td>
                `;
                const shopBtn = document.createElement('button');
                shopBtn.className = 'shop-btn';
                shopBtn.textContent = 'Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø­Ù„Ø§Øª';
                shopBtn.onclick = () => showShopsModal(row.shops);
                tr.cells[3].appendChild(shopBtn);
                tbody.appendChild(tr);
            });
        }
        function showShopsModal(shopsArr) {
            const modal = document.getElementById('shopsModal');
            const list = document.getElementById('shopsList');
            list.innerHTML = "";
            shopsArr.forEach(shop => {
                const li = document.createElement('li');
                li.textContent = shop;
                list.appendChild(li);
            });
            modal.style.display = '';
        }
        function closeShopsModal() {
            document.getElementById('shopsModal').style.display = 'none';
        }
        function renderGoals() {
            const ul = document.getElementById('goalsList');
            ul.innerHTML = "";
            goals.forEach(goal => {
                const li = document.createElement('li');
                li.textContent = goal;
                ul.appendChild(li);
            });
        }
        function renderInspectorStats(inspector) {
            const rows = inspectionData.filter(item => item.inspector === inspector);
            let total = rows.length;
            let morning = rows.filter(r => r.shift === "ØµØ¨Ø§Ø­ÙŠØ©").length;
            let evening = rows.filter(r => r.shift === "Ù…Ø³Ø§Ø¦ÙŠØ©").length;
            let weekend = rows.filter(r => {
                const dayOfWeek = new Date(r.day).getDay();
                return weekendDays.includes(dayOfWeek);
            }).length;
            const tbody = document.getElementById('inspectorStatsTable').querySelector('tbody');
            tbody.innerHTML = `
                <tr>
                    <td>${total}</td>
                    <td>${morning}</td>
                    <td>${evening}</td>
                    <td>${weekend}</td>
                </tr>
            `;
        }
        function renderInspectorPage() {
            const inspector = document.getElementById('inspectorSelect').value;
            if (inspector) {
                renderInspectionTable(inspector);
                renderInspectorStats(inspector);
                renderGoals();
                playBirdSound();
            }
        }
        function showPasswordModal() {
            document.getElementById('modalPassword').style.display = '';
            document.getElementById('passwordInput').value = '';
            document.getElementById('passwordError').style.display = 'none';
            setTimeout(()=>document.getElementById('passwordInput').focus(), 200);
        }
        function checkPassword() {
            const val = document.getElementById('passwordInput').value;
            if(val === "1983") {
                document.getElementById('modalPassword').style.display = 'none';
                document.getElementById('adminPanel').style.display = '';
                document.getElementById('inspectorPage').style.display = 'none';
                updateInspectorList();
                updateShopList();
                updateAreaList();
                renderGoalList();
                renderShopsByArea();
                renderDistributionTable();
                handleDeveloperApiTokenBar();
            } else {
                document.getElementById('passwordError').style.display = '';
            }
        }
        function handleUserTypeChange() {
            const type = document.getElementById('userTypeSelect').value;
            const inspectorSelectBox = document.getElementById('inspectorSelectBox');
            if(type === 'developer') {
                showPasswordModal();
                inspectorSelectBox.style.display = 'none';
            } else {
                document.getElementById('adminPanel').style.display = 'none';
                document.getElementById('modalPassword').style.display = 'none';
                document.getElementById('inspectorPage').style.display = '';
                inspectorSelectBox.style.display = 'inline-block';
                fillInspectorsSelect();
                renderInspectorPage();
                showApiTokenBar(false);
            }
        }
        function playBirdSound() {
            const audio = document.getElementById('birds-audio');
            if (audio) {
                audio.currentTime = 0;
                const playPromise = audio.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        setTimeout(() => {
                            audio.pause();
                            audio.currentTime = 0;
                        }, 6000);
                    }).catch((error) => {
                        showAudioNotification();
                    });
                }
            }
        }
        function showAudioNotification() {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #234093;
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                z-index: 9999;
                font-size: 14px;
                max-width: 300px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            `;
            notification.innerHTML = `
                <div style="margin-bottom: 10px;">ğŸ”Š Ø§Ù„Ù…ØªØµÙØ­ Ù…Ù†Ø¹ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</div>
                <button onclick="playBirdSoundManually(this.parentElement)" style="background: white; color: #234093; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª</button>
                <button onclick="this.parentElement.remove()" style="background: transparent; color: white; border: 1px solid white; padding: 5px 10px; border-radius: 5px; cursor: pointer; margin-left: 5px;">Ø¥ØºÙ„Ø§Ù‚</button>
            `;
            document.body.appendChild(notification);
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 10000);
        }
        function playBirdSoundManually(notification) {
            const audio = document.getElementById('birds-audio');
            if (audio) {
                audio.currentTime = 0;
                audio.play().then(() => {
                    setTimeout(() => {
                        audio.pause();
                        audio.currentTime = 0;
                    }, 6000);
                    if (notification) {
                        notification.remove();
                    }
                });
            }
        }
        document.getElementById('addInspectorForm').onsubmit = addInspector;
        document.getElementById('addShopForm').onsubmit = addShop;
        document.getElementById('addAreaForm').onsubmit = addArea;
        document.getElementById('addGoalForm').onsubmit = addGoal;
        document.getElementById('addShopByAreaForm').onsubmit = addShopByArea;
        document.addEventListener('DOMContentLoaded', ()=>{
            fillShopsByAreaDefault();
            fillInspectorsSelect();
            renderInspectorPage();
            updateInspectorList();
            updateShopList();
            updateAreaList();
            renderGoalList();
            renderShopsByArea();
            renderDistributionTable();
        });
        document.getElementById('passwordInput').addEventListener('keydown', function(e){
            if(e.key === "Enter") checkPassword();
        });
    </script>            const val = document.getElementById('newInspector').value.trim();
            if(val && !inspectors.includes(val)) {
                inspectors.push(val);
                updateInspectorList();
                fillInspectorsSelect();
                saveAllData();
            }
            document.getElementById('newInspector').value = '';
        }
        // ÙÙŠ ÙƒÙ„ Ø¯ÙˆØ§Ù„ Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù Ø£Ø®Ø±Ù‰ Ù„Ù†ÙØ³ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø£Ø¶Ù saveAllData(); Ø¨Ø¹Ø¯ Ø§Ù„ØªØºÙŠÙŠØ±.
        // Ù…Ø«Ø§Ù„: Ø¨Ø¹Ø¯ shops.push(val) Ø£Ùˆ shops.splice(idx,1) Ø£Ùˆ areas.push(val) ... Ø§Ù„Ø®.

        // ... Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª ÙŠØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙˆØŒ ÙÙ‚Ø· Ø£Ø¶Ù saveAllData() Ø¨Ø¹Ø¯ Ø£ÙŠ ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ...
        // Ù…Ø«Ø§Ù„:
        function deleteInspector(idx) {
            if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ÙØªØ´ØŸ")) {
                inspectors.splice(idx,1);
                updateInspectorList();
                fillInspectorsSelect();
                saveAllData();
            }
        }
        // ÙˆÙ†ÙØ³ Ø§Ù„Ø´ÙŠØ¡ ÙÙŠ ÙƒÙ„ Ø­Ø°Ù Ø£Ùˆ ØªØ¹Ø¯ÙŠÙ„ Ù„Ø£ÙŠ Ù‚Ø§Ø¦Ù…Ø© -- Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ø£Ø¶Ù saveAllData() Ø¨Ø¹Ø¯ Ø§Ù„ØªØºÙŠÙŠØ±.

        // Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ø²Ø± Ù„Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø®Ø²Ù†Ø© (Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·):
        function clearAllDataAndReload() {
            if(confirm("Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ© ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·Ù‡Ø§ Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ")) {
                localStorage.clear();
                location.reload();
            }
        }
        // ÙŠÙ…ÙƒÙ†Ùƒ ÙˆØ¶Ø¹ Ø²Ø± ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø·ÙˆØ±:
        // <button onclick="clearAllDataAndReload()" style="background:#d32f2f;color:#fff">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</button>
    </script> 
        // ================== ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ Ø¯Ø§Ø¦Ù… Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª ==================
        let inspectors = [
            "Ù‡Ø§Ø¬Ø±","Ø¢Ù…Ù†Ù‡","Ø¢ÙŠÙ‡","Ø¯. ÙØ§ÙŠØ² Ø§Ù„Ù…Ø³Ø§Ù„Ù…Ø©","Ø¯.Ø¢Ù…Ù†Ù‡ Ø¨Ù† ØµØ±Ù…"
        ];
        let shops = [
            "Ù…Ø­Ù„ 1", "Ù…Ø­Ù„ 2", "Ù…Ø­Ù„ 3", "Ù…Ø­Ù„ 4",
            "Ù…Ø­Ù„ 5", "Ù…Ø­Ù„ 6", "Ù…Ø­Ù„ 7", "Ù…Ø­Ù„ 8",
            "Ù…Ø­Ù„ 9", "Ù…Ø­Ù„ 10", "Ù…Ø­Ù„ 11"
        ];
        let areas = [
            "Ø§Ù„Ù…ØµÙØ­", "Ù…Ø¯ÙŠÙ†Ø© Ø®Ù„ÙŠÙØ©", "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø£", "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø¨", "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø¬", "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø¯"
        ];
        let goals = [
            "Ø¶Ù…Ø§Ù† Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",
            "Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ø§Ø´ØªØ±Ø§Ø·Ø§Øª Ø§Ù„ØµØ­ÙŠØ©"
        ];
        let inspectionData = [
            { inspector: "Ù‡Ø§Ø¬Ø±", day: "2025-09-22", shift: "ØµØ¨Ø§Ø­ÙŠØ©", area: "Ø§Ù„Ù…ØµÙØ­", shops: ["Ù…Ø­Ù„ 1", "Ù…Ø­Ù„ 2"] },
            { inspector: "Ø¢Ù…Ù†Ù‡", day: "2025-09-25", shift: "Ù…Ø³Ø§Ø¦ÙŠØ©", area: "Ù…Ø¯ÙŠÙ†Ø© Ø®Ù„ÙŠÙØ©", shops: ["Ù…Ø­Ù„ 3", "Ù…Ø­Ù„ 4"] },
            { inspector: "Ø¢ÙŠÙ‡", day: "2025-09-22", shift: "ØµØ¨Ø§Ø­ÙŠØ©", area: "Ø§Ù„Ù…ØµÙØ­", shops: ["Ù…Ø­Ù„ 5"] },
            { inspector: "Ø¯. ÙØ§ÙŠØ² Ø§Ù„Ù…Ø³Ø§Ù„Ù…Ø©", day: "2025-09-21", shift: "ØµØ¨Ø§Ø­ÙŠØ©", area: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø£", shops: ["Ù…Ø­Ù„ 6", "Ù…Ø­Ù„ 7"] },
            { inspector: "Ø¯. ÙØ§ÙŠØ² Ø§Ù„Ù…Ø³Ø§Ù„Ù…Ø©", day: "2025-09-27", shift: "ØµØ¨Ø§Ø­ÙŠØ©", area: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø¨", shops: ["Ù…Ø­Ù„ 8"] },
            { inspector: "Ø¯.Ø¢Ù…Ù†Ù‡ Ø¨Ù† ØµØ±Ù…", day: "2025-09-21", shift: "Ù…Ø³Ø§Ø¦ÙŠØ©", area: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø¬", shops: ["Ù…Ø­Ù„ 9"] },
            { inspector: "Ø¯.Ø¢Ù…Ù†Ù‡ Ø¨Ù† ØµØ±Ù…", day: "2025-09-28", shift: "Ù…Ø³Ø§Ø¦ÙŠØ©", area: "Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø¯", shops: ["Ù…Ø­Ù„ 10", "Ù…Ø­Ù„ 11"] }
        ];
        let shopsByArea = {};
        let distributionRows = [];

        // Ø¯ÙˆØ§Ù„ Ø§Ù„Ø­ÙØ¸ ÙˆØ§Ù„ØªØ­Ù…ÙŠÙ„ Ù…Ù† LocalStorage
        function saveAllData() {
            localStorage.setItem('inspectors', JSON.stringify(inspectors));
            localStorage.setItem('shops', JSON.stringify(shops));
            localStorage.setItem('areas', JSON.stringify(areas));
            localStorage.setItem('goals', JSON.stringify(goals));
            localStorage.setItem('inspectionData', JSON.stringify(inspectionData));
            localStorage.setItem('shopsByArea', JSON.stringify(shopsByArea));
            localStorage.setItem('distributionRows', JSON.stringify(distributionRows));
        }
        function loadAllData() {
            if(localStorage.getItem('inspectors')) inspectors = JSON.parse(localStorage.getItem('inspectors'));
            if(localStorage.getItem('shops')) shops = JSON.parse(localStorage.getItem('shops'));
            if(localStorage.getItem('areas')) areas = JSON.parse(localStorage.getItem('areas'));
            if(localStorage.getItem('goals')) goals = JSON.parse(localStorage.getItem('goals'));
            if(localStorage.getItem('inspectionData')) inspectionData = JSON.parse(localStorage.getItem('inspectionData'));
            if(localStorage.getItem('shopsByArea')) shopsByArea = JSON.parse(localStorage.getItem('shopsByArea'));
            if(localStorage.getItem('distributionRows')) distributionRows = JSON.parse(localStorage.getItem('distributionRows'));
        }
        loadAllData();
        // ================ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ ================

        // ... Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ ÙˆØ§Ù„Ø¯ÙˆØ§Ù„ ÙƒÙ…Ø§ Ù‡ÙŠ ...
        // ÙÙŠ ÙƒÙ„ Ø¯Ø§Ù„Ø© "Ø¥Ø¶Ø§ÙØ©" Ø£Ùˆ "ØªØ¹Ø¯ÙŠÙ„" Ø£Ùˆ "Ø­Ø°Ù" Ù„Ø£ÙŠ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©ØŒ Ø£Ø¶Ù saveAllData() Ø¨Ø¹Ø¯ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
        // Ù…Ø«Ù„Ø§Ù‹:
        function addInspector(e) {
            e.preventDefault();
            const val = document.getElementById('newInspector').value.trim();
            if(val && !inspectors.includes(val)) {
                inspectors.push(val);
                updateInspectorList();
                fillInspectorsSelect();
                saveAllData();
            }
            document.getElementById('newInspector').value = '';
        }
        function deleteInspector(idx) {
            if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…ÙØªØ´ØŸ")) {
                inspectors.splice(idx,1);
                updateInspectorList();
                fillInspectorsSelect();
                saveAllData();
            }
        }
        function saveEditInspector(idx) {
            const val = document.getElementById(`editInspectorInput${idx}`).value.trim();
            if(val && !inspectors.includes(val)) {
                inspectors[idx] = val;
                updateInspectorList();
                fillInspectorsSelect();
                saveAllData();
            }
        }
        // ... Ø¶Ø¹ saveAllData() Ø£ÙŠØ¶Ù‹Ø§ Ø¨Ø¹Ø¯ Ø£ÙŠ ØªØ¹Ø¯ÙŠÙ„ ÙÙŠ shops, areas, goals, shopsByArea, distributionRows
        // Ù…Ø«Ø§Ù„:
        function addShop(e) {
            e.preventDefault();
            const val = document.getElementById('newShop').value.trim();
            if(val && !shops.includes(val)) {
                shops.push(val);
                updateShopList();
                saveAllData();
            }
            document.getElementById('newShop').value = '';
        }
        function deleteShop(idx) {
            if(confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø­Ù„ØŸ")) {
                shops.splice(idx,1);
                updateShopList();
                saveAllData();
            }
        }
        // ... ÙˆÙ‡ÙƒØ°Ø§ Ù„Ø¨Ù‚ÙŠØ© Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ ÙˆØ§Ù„Ø£Ù‡Ø¯Ø§Ù ÙˆØ§Ù„ØªÙˆØ²ÙŠØ¹ ...
        // Ù…Ø«Ø§Ù„ Ù„Ù„Ø­Ø°Ù Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ (Ø²Ø± Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·):
        function clearAllDataAndReload() {
            if(confirm("Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ© ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·Ù‡Ø§ Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ")) {
                localStorage.clear();
                location.reload();
            }
        }
        // ÙŠÙ…ÙƒÙ†Ùƒ ÙˆØ¶Ø¹ Ø²Ø± Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ† ÙÙ‚Ø·:
        // <button onclick="clearAllDataAndReload()" style="background:#d32f2f;color:#fff">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</button>
        // ========== Ø¨Ù‚ÙŠØ© Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª ÙƒÙ…Ø§ Ù‡Ùˆ ØªÙ…Ø§Ù…Ø§ ========== 
</body>
</html>
