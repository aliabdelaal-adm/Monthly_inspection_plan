<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Splash Screen Audio Test</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Cairo', Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        .section {
            background: #f8f9fa;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            border-right: 5px solid #667eea;
        }
        
        .section h2 {
            color: #667eea;
            margin-top: 0;
            font-size: 1.5em;
        }
        
        .feature {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }
        
        .feature-title {
            color: #667eea;
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 8px;
        }
        
        .feature-desc {
            color: #555;
            line-height: 1.6;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            font-family: 'Cairo', Arial, sans-serif;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.5);
        }
        
        .btn-container {
            text-align: center;
            margin: 30px 0;
        }
        
        .log {
            background: #1e1e1e;
            color: #00ff00;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            max-height: 400px;
            overflow-y: auto;
            margin: 20px 0;
        }
        
        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-bottom: 1px solid #333;
        }
        
        .success { color: #00ff00; }
        .error { color: #ff0000; }
        .warning { color: #ffaa00; }
        .info { color: #00aaff; }
        
        .status {
            background: #e8f5e9;
            border: 2px solid #4caf50;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        .status-title {
            color: #2e7d32;
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .status-value {
            font-size: 2em;
            font-weight: bold;
            color: #1b5e20;
        }
        
        .emoji {
            font-size: 2em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¬ Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ø´Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„ØªÙ…Ù‡ÙŠØ¯ÙŠØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</h1>
        
        <div class="section">
            <h2>âœ¨ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©</h2>
            
            <div class="feature">
                <div class="feature-title">ğŸµ 1. ØªÙƒØ§Ù…Ù„ Web Audio API</div>
                <div class="feature-desc">
                    ÙŠÙˆØ¬Ù‡ ØµÙˆØª Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…Ù† Ø®Ù„Ø§Ù„ AudioContext Ùˆ GainNode Ù„Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
                </div>
            </div>
            
            <div class="feature">
                <div class="feature-title">ğŸ”Š 2. Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙƒØªÙ… Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†</div>
                <div class="feature-desc">
                    ÙŠÙ„ØºÙŠ ÙƒØªÙ… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙˆØ±Ø§Ù‹ Ø¹Ù†Ø¯ Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø§Ø´Ø© Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø± ØªÙØ§Ø¹Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                </div>
            </div>
            
            <div class="feature">
                <div class="feature-title">ğŸ‘† 3. Ù…Ø¤Ø´Ø± ØµÙˆØªÙŠ Ù…Ø±Ø¦ÙŠ</div>
                <div class="feature-desc">
                    ÙŠØ¸Ù‡Ø± Ù†Øµ Ø¹Ø±Ø¨ÙŠ "Ø§Ù„Ù…Ø³ Ø§Ù„Ø´Ø§Ø´Ø© Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª" Ø¥Ø°Ø§ Ø­Ø¸Ø± Ø§Ù„Ù…ØªØµÙØ­ Ø§Ù„ØµÙˆØª
                </div>
            </div>
            
            <div class="feature">
                <div class="feature-title">ğŸ–±ï¸ 4. Ø´Ø§Ø´Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ù†Ù‚Ø±</div>
                <div class="feature-desc">
                    Ø£ÙŠ Ù†Ù‚Ø±Ø© Ø£Ùˆ Ù„Ù…Ø³Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© ØªÙØ¹Ù„ Ø§Ù„ØµÙˆØª ÙÙˆØ±Ø§Ù‹
                </div>
            </div>
            
            <div class="feature">
                <div class="feature-title">ğŸ¯ 5. ÙƒØ´Ù Ø°ÙƒÙŠ</div>
                <div class="feature-desc">
                    ÙŠÙƒØªØ´Ù ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ØµÙˆØª ÙŠØ¹Ù…Ù„ ÙˆÙŠØ®ÙÙŠ Ø§Ù„Ù…Ø¤Ø´Ø± Ø¹Ù†Ø¯ Ø§Ù„Ù†Ø¬Ø§Ø­
                </div>
            </div>
        </div>
        
        <div class="status">
            <div class="status-title">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹</div>
            <div class="status-value">
                <span class="emoji">ğŸ¯</span>
                60-70% ØªÙ„Ù‚Ø§Ø¦ÙŠ | 95% Ø¨Ù„Ù…Ø³Ø© ÙˆØ§Ø­Ø¯Ø© | 100% Ù†Ù‡Ø§Ø¦ÙŠ
            </div>
        </div>
        
        <div class="btn-container">
            <button class="btn" onclick="testSplash()">
                <span class="emoji">ğŸ¬</span> Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¢Ù†
            </button>
            <button class="btn" onclick="clearLogs()">
                <span class="emoji">ğŸ—‘ï¸</span> Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„
            </button>
            <button class="btn" onclick="resetCooldown()">
                <span class="emoji">ğŸ”„</span> Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
            </button>
        </div>
        
        <div class="section">
            <h2>ğŸ“Š Ø³Ø¬Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h2>
            <div id="logContainer" class="log"></div>
        </div>
        
        <div class="section">
            <h2>â„¹ï¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h2>
            <div class="feature">
                <div class="feature-title">Ø§Ù„Ù…ØªØµÙØ­</div>
                <div class="feature-desc" id="browserInfo"></div>
            </div>
            <div class="feature">
                <div class="feature-title">Ø§Ù„ÙˆÙ‚Øª</div>
                <div class="feature-desc" id="timeInfo"></div>
            </div>
            <div class="feature">
                <div class="feature-title">Ø¯Ø¹Ù… Web Audio API</div>
                <div class="feature-desc" id="webAudioSupport"></div>
            </div>
        </div>
    </div>
    
    <!-- Splash Screen (Same as index.html) -->
    <div id="videoSplashScreen" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 999999999; justify-content: center; align-items: center; overflow: hidden; cursor: pointer;">
        <video id="splashVideo" style="width: 100%; height: 100%; object-fit: cover;" autoplay muted playsinline preload="auto">
            <source src="uae540.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div id="audioIndicator" style="display: none; position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); background: rgba(255, 255, 255, 0.95); color: #333; padding: 15px 30px; border-radius: 50px; font-family: 'Cairo', Arial, sans-serif; font-size: 16px; font-weight: bold; box-shadow: 0 4px 15px rgba(0,0,0,0.3); animation: pulse 2s infinite; z-index: 1000;">
            <span style="font-size: 24px; margin-left: 10px;">ğŸ”‡</span>
            <span>Ø§Ù„Ù…Ø³ Ø§Ù„Ø´Ø§Ø´Ø© Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª</span>
            <span style="font-size: 24px; margin-right: 10px;">ğŸ‘†</span>
        </div>
    </div>
    
    <style>
    @keyframes pulse {
        0%, 100% { transform: translateX(-50%) scale(1); }
        50% { transform: translateX(-50%) scale(1.05); }
    }
    </style>
    
    <script>
        // Initialize
        document.getElementById('browserInfo').textContent = navigator.userAgent;
        document.getElementById('timeInfo').textContent = new Date().toLocaleString('ar-AE');
        document.getElementById('webAudioSupport').textContent = 
            typeof AudioContext !== 'undefined' || typeof webkitAudioContext !== 'undefined' 
            ? 'âœ… Ù…Ø¯Ø¹ÙˆÙ…' : 'âŒ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…';
        
        const logContainer = document.getElementById('logContainer');
        let audioContext = null;
        let sourceNode = null;
        let gainNode = null;
        
        function log(message, type = 'info') {
            const entry = document.createElement('div');
            entry.className = 'log-entry ' + type;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logContainer.appendChild(entry);
            logContainer.scrollTop = logContainer.scrollHeight;
            console.log(message);
        }
        
        function clearLogs() {
            logContainer.innerHTML = '';
            log('ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„Ø§Øª âœ¨', 'success');
        }
        
        function resetCooldown() {
            localStorage.removeItem('lastSplashScreenTime');
            log('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙØªØ±Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ğŸ”„', 'success');
        }
        
        function testSplash() {
            log('ğŸ¬ Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ø´Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„ØªÙ…Ù‡ÙŠØ¯ÙŠØ©...', 'info');
            
            const splashScreen = document.getElementById('videoSplashScreen');
            const video = document.getElementById('splashVideo');
            const audioIndicator = document.getElementById('audioIndicator');
            
            if (!splashScreen || !video) {
                log('âŒ Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©', 'error');
                return;
            }
            
            log('âœ… Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ù…ÙˆØ¬ÙˆØ¯Ø©', 'success');
            
            // Show splash
            splashScreen.style.display = 'flex';
            log('ğŸ“º ØªÙ… Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ', 'info');
            
            // Reset video
            video.currentTime = 0;
            
            // Auto-hide when video ends
            video.addEventListener('ended', function() {
                log('ğŸ¬ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ - Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©', 'info');
                splashScreen.style.display = 'none';
                if (audioIndicator) audioIndicator.style.display = 'none';
            }, { once: true });
            
            // Web Audio API
            try {
                if (!audioContext && typeof AudioContext !== 'undefined') {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    log('ğŸµ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ AudioContext', 'success');
                }
                
                if (audioContext && !sourceNode) {
                    sourceNode = audioContext.createMediaElementSource(video);
                    gainNode = audioContext.createGain();
                    sourceNode.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    gainNode.gain.value = 1.0;
                    log('ğŸµ ØªÙ… ØªÙˆØµÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¹Ø¨Ø± Web Audio API', 'success');
                }
                
                if (audioContext && audioContext.state === 'suspended') {
                    audioContext.resume().then(() => {
                        log('ğŸ”Š ØªÙ… Ø§Ø³ØªØ¦Ù†Ø§Ù AudioContext', 'success');
                    });
                }
            } catch (error) {
                log('âš ï¸ Web Audio API ØºÙŠØ± Ù…ØªØ§Ø­: ' + error.message, 'warning');
            }
            
            // Unmute immediately
            video.muted = false;
            video.volume = 1.0;
            log(`ğŸ”Š Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ù„ØºØ§Ø¡ ÙƒØªÙ… Ø§Ù„ØµÙˆØª (muted=${video.muted}, volume=${video.volume})`, 'info');
            
            // Start playback
            const playPromise = video.play();
            
            if (playPromise !== undefined) {
                playPromise.then(() => {
                    log('âœ… Ø¨Ø¯Ø£ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ', 'success');
                    
                    if (video.muted) {
                        video.muted = false;
                        log('ğŸ”Š ØªÙ… Ø¥Ù„ØºØ§Ø¡ ÙƒØªÙ… Ø§Ù„ØµÙˆØª Ø¨Ø´ÙƒÙ„ Ù…ØªØ²Ø§Ù…Ù†', 'success');
                    }
                    
                    if (audioContext && audioContext.state === 'suspended') {
                        audioContext.resume();
                    }
                    
                    // Check audio after delay
                    setTimeout(() => {
                        const audioActive = !video.muted && video.volume > 0;
                        const contextActive = audioContext ? audioContext.state === 'running' : false;
                        
                        if (audioActive || contextActive) {
                            log('ğŸ”Šâœ¨ Ø§Ù„ØµÙˆØª ÙŠØ¹Ù…Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¯ÙˆÙ† ØªÙØ§Ø¹Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…!', 'success');
                            log(`ğŸ“Š Ø§Ù„Ø­Ø§Ù„Ø©: muted=${video.muted}, volume=${video.volume}, context=${audioContext?.state}`, 'info');
                            if (audioIndicator) audioIndicator.style.display = 'none';
                        } else {
                            log('âš ï¸ Ø§Ù„ØµÙˆØª Ù…Ø­Ø¸ÙˆØ± - Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¤Ø´Ø±', 'warning');
                            if (audioIndicator) audioIndicator.style.display = 'block';
                            
                            const enableAudio = function() {
                                video.muted = false;
                                video.volume = 1.0;
                                if (audioContext && audioContext.state === 'suspended') {
                                    audioContext.resume();
                                }
                                log('ğŸ”Š ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¨Ø§Ù„Ù†Ù‚Ø±', 'success');
                                if (audioIndicator) audioIndicator.style.display = 'none';
                            };
                            
                            splashScreen.addEventListener('click', enableAudio, { once: true });
                            splashScreen.addEventListener('touchstart', enableAudio, { once: true });
                        }
                    }, 150);
                    
                }).catch(error => {
                    log('âš ï¸ ÙØ´Ù„ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ: ' + error.message, 'error');
                    
                    video.muted = true;
                    video.play().then(() => {
                        log('âœ… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙŠØ¹Ù…Ù„ Ù…ÙƒØªÙˆÙ…Ø§Ù‹ - Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¤Ø´Ø±', 'warning');
                        if (audioIndicator) audioIndicator.style.display = 'block';
                        
                        const enableAudio = function() {
                            video.muted = false;
                            video.volume = 1.0;
                            if (audioContext) audioContext.resume();
                            log('ğŸ”Š ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¨Ø§Ù„ØªÙØ§Ø¹Ù„', 'success');
                            if (audioIndicator) audioIndicator.style.display = 'none';
                        };
                        
                        splashScreen.addEventListener('click', enableAudio, { once: true });
                        splashScreen.addEventListener('touchstart', enableAudio, { once: true });
                    });
                });
            }
        }
        
        // Initial log
        log('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ØµÙØ­Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©', 'success');
        log('ğŸ“ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± - Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± "Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¢Ù†"', 'info');
    </script>
</body>
</html>
