# دليل الاستخدام السريع للحفظ الجديد
# Quick Guide to New Save Feature

## 📋 نظرة عامة (Overview)

تم تحديث نظام حفظ إشعارات الجرس! الآن يمكنك حفظ ملف `plan-data.json` مباشرة في مجلد المشروع بدلاً من التنزيل إلى Downloads أو OneDrive.

The bell notifications save system has been updated! Now you can save `plan-data.json` directly to your project folder instead of downloading to Downloads or OneDrive.

---

## 🚀 البدء السريع (Quick Start)

### الخطوة 1: افتح التطبيق
1. افتح ملف `index.html` في المتصفح (Chrome أو Edge)
2. تأكد من أنك في وضع المطور (Developer Mode)

### الخطوة 2: اصنع إشعار جرس جديد
1. اضغط على أيقونة الجرس 🔔
2. اكتب إشعارك
3. اضغط على زر "حفظ"

### الخطوة 3: اختر الموقع (أول مرة فقط)
1. سيظهر مربع حوار "حفظ الملف"
2. انتقل إلى مجلد المشروع على جهازك
3. اختر الملف `plan-data.json` الموجود
4. اضغط "حفظ"

### الخطوة 4: استمتع بالحفظ التلقائي!
من الآن فصاعداً، عند حفظ أي إشعار جديد:
- ✅ سيُحفظ الملف تلقائياً في نفس الموقع
- ✅ لن تحتاج لاختيار الموقع مرة أخرى
- ✅ لن توجد تنزيلات إلى Downloads أو OneDrive

---

## 📸 شرح بالصور (Visual Guide)

### السيناريو: المرة الأولى

```
┌─────────────────────────────────────┐
│  🔔 إشعارات الجرس                  │
│  ┌───────────────────────────────┐  │
│  │ إشعار مهم للجميع...          │  │
│  │                               │  │
│  │                               │  │
│  └───────────────────────────────┘  │
│                                     │
│  [حفظ] [مسح] [إغلاق]               │
└─────────────────────────────────────┘
          ↓ المستخدم يضغط "حفظ"
          ↓
┌─────────────────────────────────────┐
│  حفظ الملف                          │
│                                     │
│  الموقع: 📁                        │
│  > My Computer                      │
│    > Documents                      │
│      > Projects                     │
│        > Monthly_inspection_plan    │
│          📄 plan-data.json ← اختر  │
│                                     │
│  [إلغاء]              [حفظ] ←      │
└─────────────────────────────────────┘
          ↓
┌─────────────────────────────────────┐
│  ✅ تم حفظ الملف!                   │
│  سيتم الحفظ في نفس الموقع          │
│  تلقائياً في المستقبل               │
└─────────────────────────────────────┘
```

### السيناريو: المرات التالية

```
┌─────────────────────────────────────┐
│  🔔 إشعارات الجرس                  │
│  ┌───────────────────────────────┐  │
│  │ إشعار آخر...                 │  │
│  │                               │  │
│  │                               │  │
│  └───────────────────────────────┘  │
│                                     │
│  [حفظ] [مسح] [إغلاق]               │
└─────────────────────────────────────┘
          ↓ المستخدم يضغط "حفظ"
          ↓
┌─────────────────────────────────────┐
│  ✅ تم حفظ الملف في الموقع         │
│     المحدد على جهازك                │
│                                     │
│  📍 الموقع:                         │
│  Documents/Projects/                │
│  Monthly_inspection_plan/           │
│  plan-data.json                     │
└─────────────────────────────────────┘

(لا حاجة لاختيار الموقع مرة أخرى!)
```

---

## ⚙️ الإعدادات والمتطلبات (Settings & Requirements)

### المتصفح المطلوب
- ✅ **Chrome** (الإصدار 86 أو أحدث) - مستحسن
- ✅ **Microsoft Edge** (الإصدار 86 أو أحدث) - مستحسن
- ✅ **Opera** (الإصدار 72 أو أحدث) - مدعوم
- ⚠️ **Firefox** - غير مدعوم (سيُحفظ في localStorage فقط)
- ⚠️ **Safari** - غير مدعوم (سيُحفظ في localStorage فقط)

### الصلاحيات
عند استخدام الميزة لأول مرة، سيطلب المتصفح صلاحية الوصول للملفات:
- ✅ اسمح بالوصول للملفات (File Access Permission)
- ✅ اسمح بالكتابة على الملفات (Write Permission)

---

## ❓ الأسئلة الشائعة (FAQ)

### س: ماذا لو ضغطت "إلغاء" في مربع اختيار الموقع؟
**ج:** لا مشكلة! البيانات محفوظة في localStorage. يمكنك المحاولة مرة أخرى لاحقاً.

### س: كيف أغير موقع الحفظ؟
**ج:** حالياً، لتغيير الموقع:
1. أغلق المتصفح تماماً
2. أعد فتح التطبيق
3. عند الحفظ، ستُطلب منك اختيار الموقع مرة أخرى

### س: هل يمكنني استخدام أكثر من موقع؟
**ج:** لا، النظام مصمم لحفظ في موقع واحد فقط لتجنب الارتباك. يمكنك تغيير الموقع بإغلاق المتصفح وإعادة فتحه.

### س: ماذا لو كان متصفحي لا يدعم هذه الميزة؟
**ج:** البيانات ستُحفظ في localStorage فقط. يمكنك استخدام زر "تصدير البيانات إلى ملف JSON" للحفظ اليدوي.

### س: هل البيانات آمنة؟
**ج:** نعم! النظام لا يرسل أي بيانات عبر الإنترنت. كل شيء يحدث على جهازك المحلي فقط.

---

## 🔧 استكشاف الأخطاء (Troubleshooting)

### المشكلة: لا يظهر مربع حوار اختيار الموقع

**الحلول:**
1. تأكد من استخدام Chrome أو Edge (الإصدار 86+)
2. تحقق من تحديث المتصفح لآخر إصدار
3. تأكد من السماح بالصلاحيات في إعدادات المتصفح

### المشكلة: رسالة خطأ "تم رفض الصلاحية"

**الحلول:**
1. في Chrome: اذهب إلى `الإعدادات > الخصوصية والأمان > إعدادات الموقع > الأذونات > الملفات`
2. تأكد من السماح بالوصول للملفات
3. أعد تحميل الصفحة وحاول مرة أخرى

### المشكلة: الملف لا يُحفظ في الموقع الصحيح

**الحلول:**
1. تأكد من اختيار الملف الصحيح `plan-data.json` في المرة الأولى
2. تحقق من مسار المجلد
3. جرب إعادة ضبط الموقع (أغلق المتصفح وأعد فتحه)

---

## 📝 ملاحظات مهمة (Important Notes)

### للمطورين (For Developers)
- مرجع الملف (`window.bellDataFileHandle`) محفوظ في الذاكرة فقط
- يتم فقدان المرجع عند إغلاق المتصفح
- هذا تصميم مقصود للأمان والخصوصية

### للمستخدمين (For Users)
- الحفظ التلقائي يعمل فقط خلال نفس الجلسة
- عند فتح المتصفح من جديد، ستُطلب منك اختيار الموقع مرة أخرى
- هذا طبيعي ومتوقع لحماية خصوصيتك

### للمزامنة مع Git (For Git Sync)
- بعد الحفظ، يمكنك مباشرة عمل `git add` و `git commit`
- لا حاجة لنقل الملفات أو نسخها يدوياً
- النظام الجديد يسهّل عملية المزامنة كثيراً

---

## 🎯 الخلاصة (Summary)

### ما تم إصلاحه ✅
- ❌ التنزيل التلقائي إلى Downloads/OneDrive
- ❌ الحاجة لنقل الملف يدوياً
- ❌ الارتباك حول موقع الملف

### ما تم إضافته ✅
- ✅ اختيار موقع محدد للحفظ
- ✅ حفظ تلقائي في نفس الموقع
- ✅ تجربة مستخدم أفضل
- ✅ مزامنة أسهل مع Git

---

## 📞 الدعم (Support)

إذا واجهت أي مشاكل أو لديك اقتراحات:
1. راجع قسم "استكشاف الأخطاء" أعلاه
2. اقرأ الوثائق الكاملة في `BELL_NOTIFICATIONS_FILE_SAVE.md`
3. اطلع على مخطط التدفق في `BELL_SAVE_FLOW_DIAGRAM.md`
4. تواصل مع المطور للحصول على المساعدة

---

**نتمنى لك تجربة ممتعة! 🎉**

*آخر تحديث: يناير 2025*
