# ุฅุตูุงุญ ุฑูุน ูุนุฑุถ ุชูุงุฑูุฑ ุงูุชูุชูุด ุงูุฌูุงุนู

## ๐ ููุฎุต ุงููุดููุฉ

ุนูุฏ ุฑูุน ุงูุชูุฑูุฑ ูู ุตูุญุฉ ุชูุงุฑูุฑ ุงูุชูุชูุด ุงูุฌูุงุนูุ ูุงูุช ุชุธูุฑ ุฑุณุงูุฉ ุฎุทุฃ ูู ุฑูุน ุงูุชูุฑูุฑ. ุงููุทููุจ:
- ุฅุตูุงุญ ุฎุทุฃ ุฑูุน ุงูุชูุงุฑูุฑ
- ุฌุนู ุฑูุน ูุชุญููู ุฃู ุชูุงุฑูุฑ ูุชุงุญ ูุณุฑูุน ูููุฑู
- ุนุฑุถ ุงูุชูุงุฑูุฑ ูุจุงุดุฑุฉ ููุนุฑุถ ูู ุดุงุดุฉ ุงููููุน

## ๐ ุงูุฃุณุจุงุจ ุงูุฌุฐุฑูุฉ ูููุดููุฉ

1. **ูุดููุฉ ุงููุชุงุจุฉ ููู ุงููููุงุช**: ุนูุฏ ุฑูุน ููู ุจููุณ ุงูุงุณูุ ูุชุทูุจ GitHub API ูุฌูุฏ SHA ููููู ุงูููุฌูุฏ ูุชุญุฏูุซู
2. **ุนุฏู ุงูุนุฑุถ ุงูููุฑู**: ูุงูุช ุงูุชูุงุฑูุฑ ุชุฃุฎุฐ ุซุงููุฉ ูุงุญุฏุฉ ูุจู ุงูุชุญุฏูุซ ุจุนุฏ ุงูุฑูุน
3. **ูุดุงูู ุงูุชุญูู ูู ุงูุชููู**: ุงูุชููู ูุฏ ูููู ููุชูู ุงูุตูุงุญูุฉ ุฃู ุบูุฑ ุตุงูุญ
4. **ุฑุณุงุฆู ุฎุทุฃ ุนุงูุฉ**: ุฑุณุงุฆู ุงูุฎุทุฃ ูู ุชูู ูุญุฏุฏุฉ ุจูุง ูููู ูุชุญุฏูุฏ ุงููุดููุฉ ุงููุนููุฉ
5. **ุนุฏู ูุนุงูุฌุฉ ุงููููุงุช ุงูููุฑุฑุฉ**: ูู ููู ููุงู ูุญุต ูููููุงุช ุงูููุฌูุฏุฉ ูุจู ุงูุฑูุน

## โ ุงูุญููู ุงููุทุจูุฉ

### 1. ุชุญุณูู ุฏุงูุฉ `uploadGroupInspectionReport`

#### ุงูุชุญุณููุงุช ุงูุฑุฆูุณูุฉ:
- โ **ุฑุณุงุฆู ุชูุฏู ุชูุตูููุฉ**: ุฅุถุงูุฉ ุฑุณุงุฆู ูุงุถุญุฉ ููู ุฎุทูุฉ ูู ุฎุทูุงุช ุงูุฑูุน
- โ **ูุญุต ูุฌูุฏ ุงูููู**: ุงูุชุญูู ูู ูุฌูุฏ ุงูููู ูุจู ุงูุฑูุน ูุงูุญุตูู ุนูู SHA ุฅุฐุง ูุงู ููุฌูุฏุงู
- โ **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงูุดุงููุฉ**: ุฑุณุงุฆู ูุญุฏุฏุฉ ููู ููุน ูู ุฃุฎุทุงุก HTTP:
  - `401/403`: ุงูุชููู ุบูุฑ ุตุงูุญ ุฃู ููุชูู ุงูุตูุงุญูุฉ
  - `404`: ุงููุณุงุฑ ุบูุฑ ููุฌูุฏ
  - `409`: ุชุนุงุฑุถ ูู ุงูููู
  - `422`: ุงูุจูุงูุงุช ุบูุฑ ุตุงูุญุฉ
- โ **ุชูุธูู ุฃุณูุงุก ุงููููุงุช**: ุฅุฒุงูุฉ ุงูุฃุญุฑู ุงูุฎุงุตุฉ ูู ุฃุณูุงุก ุงููููุงุช
- โ **ุงูุนุฑุถ ุงูููุฑู**: ุฅุฒุงูุฉ `setTimeout` ูุงูุนุฑุถ ูุจุงุดุฑุฉ ุจุนุฏ ุงูุฑูุน
- โ **ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงูุดุจูุฉ**: ุฑุณุงุฆู ูุญุฏุฏุฉ ููุดุงูู ุงูุงุชุตุงู
- โ **ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงููุฑุงุกุฉ**: ุฅุถุงูุฉ `reader.onerror`

#### ุงูููุฏ ุงูุฑุฆูุณู:

```javascript
// ุงูุชุญูู ูู ูุฌูุฏ ุงูููู ููุญุตูู ุนูู SHA
let existingFileSha = null;
try {
    const checkRes = await fetch(`https://api.github.com/repos/${repo}/contents/${filePath}`, {
        method: 'GET',
        headers: {
            'Authorization': `Bearer ${token}`,
            'Accept': 'application/vnd.github.v3+json'
        }
    });
    
    if (checkRes.ok) {
        const existingFile = await checkRes.json();
        existingFileSha = existingFile.sha;
        statusDiv.textContent = 'โ๏ธ ุงูููู ููุฌูุฏ ูุณุจูุงูุ ุณูุชู ุชุญุฏูุซู...';
    }
} catch (checkError) {
    console.log('File does not exist, will create new');
}

// ุฅุถุงูุฉ SHA ุฅุฐุง ูุงู ุงูููู ููุฌูุฏุงู
if (existingFileSha) {
    uploadData.sha = existingFileSha;
}
```

### 2. ุชุญุณูู ุฏุงูุฉ `updateGroupReportsRegistry`

#### ุงูุชุญุณููุงุช:
- โ **ูุญุต ุงูุชูุงุฑูุฑ ุงูููุฌูุฏุฉ**: ุงูุจุญุซ ุนู ุชูุงุฑูุฑ ุจููุณ ุงููุณุงุฑ ูุชุญุฏูุซูุง
- โ **ููุน ุงูุชูุฑุงุฑ**: ุชุญุฏูุซ ุงูุชูุฑูุฑ ุงูููุฌูุฏ ุจุฏูุงู ูู ุฅูุดุงุก ุชูุฑูุฑ ููุฑุฑ
- โ **ุฑูู ุงูุฃุฎุทุงุก ุจุดูู ุตุญูุญ**: ููุนุงูุฌุฉ ุฃูุถู ูู ุงูุฏูุงู ุงููุณุชุฏุนูุฉ
- โ **ุฅุถุงูุฉ cache-busting**: ูุถูุงู ุชุญููู ุงูุจูุงูุงุช ุงูุฃุญุฏุซ
- โ **ุชุณุฌูู ุฃูุถู**: ูุชุณููู ุงูุชุตุญูุญ

#### ุงูููุฏ ุงูุฑุฆูุณู:

```javascript
// ุงูุจุญุซ ุนู ุชูุฑูุฑ ููุฌูุฏ ุจููุณ ุงููุณุงุฑ
const existingReportIndex = filesData.files.findIndex(f => f.path === filePath);

if (existingReportIndex >= 0) {
    // ุชุญุฏูุซ ุงูุชูุฑูุฑ ุงูููุฌูุฏ
    filesData.files[existingReportIndex] = reportData;
} else {
    // ุฅุถุงูุฉ ุงูุชูุฑูุฑ ุงูุฌุฏูุฏ
    filesData.files.push(reportData);
}
```

### 3. ุชุญุณูู ุฏุงูุฉ `loadGroupInspectionReports`

#### ุงูุชุญุณููุงุช:
- โ **ููุน ุงูุชุฎุฒูู ุงููุคูุช**: ุฅุถุงูุฉ headers ูููุน cache
- โ **ุชุฑุชูุจ ุงูุชูุงุฑูุฑ**: ุนุฑุถ ุงูุชูุงุฑูุฑ ุญุณุจ ุงูุชุงุฑูุฎ (ุงูุฃุญุฏุซ ุฃููุงู)
- โ **ุนุฑุถ ุงูููุช**: ุฅุถุงูุฉ ุงูููุช ูุน ุงูุชุงุฑูุฎ ูู ูุนูููุงุช ุงูุชูุฑูุฑ
- โ **ุฒุฑ ุฅุนุงุฏุฉ ุงููุญุงููุฉ**: ุฒุฑ ูุฅุนุงุฏุฉ ุงููุญุงููุฉ ุนูุฏ ูุดู ุงูุชุญููู
- โ **ุฑุณุงุฆู ุฎุทุฃ ุฃูุถู**: ูุน ููุฏ HTTP

#### ุงูููุฏ ุงูุฑุฆูุณู:

```javascript
const response = await fetch('files.json?t=' + Date.now(), {
    cache: 'no-cache',
    headers: {
        'Cache-Control': 'no-cache, no-store, must-revalidate',
        'Pragma': 'no-cache',
        'Expires': '0'
    }
});

// ุชุฑุชูุจ ุงูุชูุงุฑูุฑ
const groupReports = filesData.files
    .filter(f => f.category === 'group_inspection_reports' && f.visible === true)
    .sort((a, b) => new Date(b.uploadDate) - new Date(a.uploadDate));
```

### 4. ุชุญุณูู ุฏุงูุฉ `deleteGroupReport`

#### ุงูุชุญุณููุงุช:
- โ **ุฅุฒุงูุฉ ุงูุชุฃุฎูุฑ**: ุชุญุฏูุซ ุงููุงุฆูุฉ ููุฑุงู ุจุนุฏ ุงูุญุฐู
- โ **ุงุณุชุฎุฏุงู await**: ูุถูุงู ุงูุชุญุฏูุซ ุงูููุฑู

#### ูุจู:
```javascript
setTimeout(() => loadGroupInspectionReports(), 1000);
```

#### ุจุนุฏ:
```javascript
await loadGroupInspectionReports();
```

## ๐งช ุงูุณููุงุฑูููุงุช ุงููุฎุชุจุฑุฉ

### 1. ุฑูุน ููู ุฌุฏูุฏ โ
- ุงุฎุชูุงุฑ ููู PDF/Excel
- ุฅุฏุฎุงู ุนููุงู ููุตู
- ุงูุฑูุน ุจูุฌุงุญ
- **ุงููุชูุฌุฉ**: ุงูุชูุฑูุฑ ูุธูุฑ ููุฑุงู ูู ุงููุงุฆูุฉ

### 2. ุชุญุฏูุซ ููู ููุฌูุฏ โ
- ุฑูุน ููู ุจููุณ ุงูุงุณู
- ุฑุคูุฉ ุฑุณุงูุฉ "ุงูููู ููุฌูุฏ ูุณุจูุงูุ ุณูุชู ุชุญุฏูุซู..."
- **ุงููุชูุฌุฉ**: ุงูุชูุฑูุฑ ูุชู ุชุญุฏูุซู ุจุฏูู ุชูุฑุงุฑ

### 3. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก โ
- ุฑูุน ุจุฏูู ููู: ุฑุณุงูุฉ ูุงุถุญุฉ
- ุฑูุน ุจุฏูู ุนููุงู: ุฑุณุงูุฉ ูุงุถุญุฉ
- ููู ูุจูุฑ ุฌุฏุงู: ุฑุณุงูุฉ ุญุฏ ุงูุญุฌู
- **ุงููุชูุฌุฉ**: ุฌููุน ุงูุฃุฎุทุงุก ุชูุนุงูุฌ ุจุดูู ุตุญูุญ

### 4. ุงูุนุฑุถ ุงูููุฑู โ
- ุฑูุน ุชูุฑูุฑ ุฌุฏูุฏ
- **ุงููุชูุฌุฉ**: ูุธูุฑ ูู ุงููุงุฆูุฉ ูุจุงุดุฑุฉ ุจุฏูู ุงูุชุธุงุฑ

### 5. ุงูุชุฑุชูุจ ุงูุตุญูุญ โ
- ุนุฑุถ ุงูุชูุงุฑูุฑ ูู ุงูุฃุญุฏุซ ููุฃูุฏู
- ุนุฑุถ ุงูุชุงุฑูุฎ ูุงูููุช
- **ุงููุชูุฌุฉ**: ุชุฑุชูุจ ุตุญูุญ ููุงุถุญ

## ๐ ููุงุฑูุฉ ูุจู ูุจุนุฏ

### ูุจู ุงูุฅุตูุงุญ โ
- ุฑุณุงุฆู ุฎุทุฃ ุนูุฏ ุฑูุน ุงููููุงุช
- ุชุฃุฎูุฑ ูู ุนุฑุถ ุงูุชูุงุฑูุฑ (ุซุงููุฉ ูุงุญุฏุฉ)
- ุฑุณุงุฆู ุฎุทุฃ ุบูุฑ ูุงุถุญุฉ
- ูุดุงูู ูุน ุงููููุงุช ุงูููุฑุฑุฉ
- ูุง ููุฌุฏ ูุนุงูุฌุฉ ูุฃุฎุทุงุก ุงูุดุจูุฉ

### ุจุนุฏ ุงูุฅุตูุงุญ โ
- ุฑูุน ุณูุณ ูุจุฏูู ุฃุฎุทุงุก
- ุนุฑุถ ููุฑู ููุชูุงุฑูุฑ (0 ุซุงููุฉ)
- ุฑุณุงุฆู ุฎุทุฃ ูุญุฏุฏุฉ ููุงุถุญุฉ
- ูุนุงูุฌุฉ ุตุญูุญุฉ ูููููุงุช ุงูููุฑุฑุฉ
- ูุนุงูุฌุฉ ุดุงููุฉ ูุฌููุน ุฃููุงุน ุงูุฃุฎุทุงุก

## ๐ฏ ุงููุชุงุฆุฌ

### ุงูุณุฑุนุฉ ูุงูุฃุฏุงุก
- โก **ุชุญุณู 100%**: ุฅุฒุงูุฉ ุงูุชุฃุฎูุฑ ุชูุงูุงู
- ๐ **ุนุฑุถ ููุฑู**: ุงูุชูุงุฑูุฑ ุชุธูุฑ ูุจุงุดุฑุฉ ุจุนุฏ ุงูุฑูุน
- ๐พ **ููุน Cache**: ุถูุงู ุนุฑุถ ุฃุญุฏุซ ุงูุจูุงูุงุช ุฏุงุฆูุงู

### ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู
- ๐ **ุฑุณุงุฆู ูุงุถุญุฉ**: ูุนุฑู ุงููุณุชุฎุฏู ุจุงูุถุจุท ูุง ูุญุฏุซ
- ๐ **ูุคุดุฑุงุช ุงูุชูุฏู**: ุฑุณุงุฆู ุชูุตูููุฉ ููู ุฎุทูุฉ
- โ **ุฃุฎุทุงุก ูุญุฏุฏุฉ**: ุฑุณุงุฆู ุชุณุงุนุฏ ุนูู ุญู ุงููุดุงูู
- ๐ **ุฒุฑ ุฅุนุงุฏุฉ ุงููุญุงููุฉ**: ุนูุฏ ูุดู ุงูุชุญููู

### ุงูููุซูููุฉ
- โ **ูุนุงูุฌุฉ ุงููููุงุช ุงูููุฌูุฏุฉ**: ุชุญุฏูุซ ุจุฏูุงู ูู ุงูุชูุฑุงุฑ
- โ **ูุนุงูุฌุฉ ุฃุฎุทุงุก ุงูุดุจูุฉ**: ุฑุณุงุฆู ูุงุถุญุฉ ููุดุงูู ุงูุงุชุตุงู
- โ **ุงูุชุญูู ูู ุงูุชููู**: ุฑุณุงุฆู ูุญุฏุฏุฉ ููุดุงูู ุงูุตูุงุญูุงุช
- โ **ุชูุธูู ุฃุณูุงุก ุงููููุงุช**: ููุน ูุดุงูู ุงูุฃุญุฑู ุงูุฎุงุตุฉ

## ๐ ููุงุญุธุงุช ูููุฉ

### API Headers ุงููุญุณูุฉ
```javascript
headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json',
    'Accept': 'application/vnd.github.v3+json',
    'Cache-Control': 'no-cache'
}
```

### ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงูุดุงููุฉ
```javascript
if (error.message.includes('Failed to fetch')) {
    errorMsg += 'ูุดู ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช';
} else if (uploadRes.status === 401) {
    errorMsg += 'ุงูุชููู ุบูุฑ ุตุงูุญ';
} else if (uploadRes.status === 409) {
    errorMsg += 'ุชุนุงุฑุถ ูู ุงูููู';
}
```

### ุชูุธูู ุฃุณูุงุก ุงููููุงุช
```javascript
const fileName = file.name.replace(/[<>:"/\\|?*]/g, '_');
```

## ๐ ุงูุฎูุงุตุฉ

ุชู ุฅุตูุงุญ ุฌููุน ุงููุดุงูู ุงููุชุนููุฉ ุจุฑูุน ูุนุฑุถ ุชูุงุฑูุฑ ุงูุชูุชูุด ุงูุฌูุงุนู:

1. โ **ุงูุฑูุน ูุนูู ุจุดูู ูุซุงูู**: ุจุฏูู ุฃุฎุทุงุก ุฃู ูุดุงูู
2. โ **ุงูุนุฑุถ ููุฑู**: ุงูุชูุงุฑูุฑ ุชุธูุฑ ูุจุงุดุฑุฉ ุจุนุฏ ุงูุฑูุน
3. โ **ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ**: ุฑุณุงุฆู ูุงุถุญุฉ ูุฌููุน ุงููุดุงูู ุงููุญุชููุฉ
4. โ **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุชุงุฒุฉ**: ูุคุดุฑุงุช ุชูุฏู ูุฑุณุงุฆู ูุงุถุญุฉ
5. โ **ููุซูููุฉ ุนุงููุฉ**: ูุนุงูุฌุฉ ุฌููุน ุงูุญุงูุงุช ุงูุฎุงุตุฉ

ุงููุธุงู ุงูุขู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงููุงูู ูุน ุฃุฏุงุก ูุชููุฒ! ๐
