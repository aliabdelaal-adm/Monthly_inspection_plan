# ููุฎุต ููุฒุฉ ุงูุชุญูู ูู ุชูุฑุงุฑ ุงููุญูุงุช

## ๐ฏ ุงููุฏู ูู ุงูููุฒุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ุชููุงุฆู ููุชุญูู ูู ุตุญุฉ ุฎุทุท ุงูุชูุชูุด ููุชุฃูุฏ ูู ุนุฏู ุชุนููู ููุณ ุงููุญู ูุนุฏุฉ ููุชุดูู ูู ููุณ ุงูููู.

## โจ ุงููุดููุฉ ุงููุญูููุฉ

ุณุงุจูุงู ูุงู ุจุงูุฅููุงู ุฅูุดุงุก ุฎุทุท ุชูุชูุด ูุชู ูููุง ุชุนููู ููุณ ุงููุญู ูุฃูุซุฑ ูู ููุชุด ูู ููุณ ุงููููุ ููุง ูุคุฏู ุฅูู:
- ุชุนุงุฑุถ ูู ุฌุฏุงูู ุงูุนูู
- ุงุฒุฏูุงุฌูุฉ ูู ุงูุชูุชูุด
- ุนุฏู ููุงุกุฉ ูู ุชูุฒูุน ุงูููุงุฑุฏ
- ุงุญุชูุงู ุญุฏูุซ ุฃุฎุทุงุก ูู ุงูุชูููุฐ

## ๐ ุงูุญู ุงููุทุจู

### 1. ุฏุงูุฉ ุงูุชุญูู ุงูุชููุงุฆู (`validate_shop_duplicates`)
ุชููู ูุฐู ุงูุฏุงูุฉ ุจู:
- ูุญุต ุฌููุน ุจูุงูุงุช ุงูุชูุชูุด
- ุชุฌููุน ุงููุญูุงุช ุญุณุจ ุงูุชุงุฑูุฎ
- ุงููุดู ุนู ุฃู ูุญู ูุฎุตุต ูุฃูุซุฑ ูู ููุชุด ูู ููุณ ุงูููู
- ุฅุฑุฌุงุน ุชูุฑูุฑ ููุตู ุจุงูุชูุฑุงุฑุงุช

### 2. ุงูุชูุงูู ูุน ุณูุฑูุจุช ุงูุฏูุฌ (`merge_plan_data.py`)
- ูุชู ุงูุชุญูู ุชููุงุฆูุงู ูุจู ุญูุธ ุฃู ุจูุงูุงุช
- ุฅุฐุง ุชู ุงูุชุดุงู ุชูุฑุงุฑุงุชุ ูููุบู ุงูุฏูุฌ ููุฑุงู
- ูุชู ุนุฑุถ ุฑุณุงุฆู ุฎุทุฃ ููุตูุฉ ุจุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- ุชูุญุฏุฏ ุจุฏูุฉ ุงูุชุงุฑูุฎ ูุงููุญู ูุงูููุชุดูู ุงููุชุนุงุฑุถูู

### 3. ุฃุฏุงุฉ ุงูุชุญูู ุงููุณุชููุฉ (`validate_plan.py`)
- ูููุญุต ุงูุณุฑูุน ููุจูุงูุงุช ุงูุญุงููุฉ
- ูุง ุชูุฌุฑู ุฃู ุชุนุฏููุงุช
- ุชููุฑ ุชูุฑูุฑ ุดุงูู ุนู ุญุงูุฉ ุงูุจูุงูุงุช

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ููุชุญูู ูู ุงูุจูุงูุงุช ุงูุญุงููุฉ
```bash
python3 validate_plan.py
```

### ุนูุฏ ุฏูุฌ ุจูุงูุงุช ุฌุฏูุฏุฉ
```bash
python3 merge_plan_data.py
```
ุณูุชู ุงูุชุญูู ุชููุงุฆูุงูุ ูุฅุฐุง ููุฌุฏุช ุชูุฑุงุฑุงุช ุณูููุบู ุงูุฏูุฌ ูุน ุนุฑุถ ุงูุชูุงุตูู.

## ๐ ูุซุงู ุนูู ุฑุณุงูุฉ ุงูุฎุทุฃ

ุนูุฏ ุงูุชุดุงู ุชูุฑุงุฑุ ุณุชุธูุฑ ุฑุณุงูุฉ ูุซู:

```
โ ุฎุทุฃ: ุชู ุงูุชุดุงู ุชูุฑุงุฑ ูุญูุงุช ูุนุฏุฉ ููุชุดูู ูู ููุณ ุงูููู!
โ Error: Duplicate shop assignments detected!

๐ ุชูุงุตูู ุงูุชูุฑุงุฑุงุช / Duplicate Details:
================================================================================

๐ ุงูุชุงุฑูุฎ / Date: 2025-09-26
๐ช ุงููุญู / Shop: ูุญู ุจูุช ุงูุทููุฑ
๐ฅ ุงูููุชุดูู / Inspectors:
   - ุฏ. ุขููู ุจู ุตุฑู
   - ุฏ. ุนูู ุนุจุฏุงูุนุงู

================================================================================
โ๏ธ  ูุฑุฌู ุชุตุญูุญ ุงูุฎุทุฉ ูุงุฎุชูุงุฑ ูุญูุงุช ูุฎุชููุฉ ููููุชุดูู ูู ููุณ ุงูููู
โ๏ธ  Please correct the plan and choose different shops for inspectors on the same day
โ ุงูุฏูุฌ ููุบู / Merge cancelled
```

## โ ุงูุญุงูุงุช ุงููุณููุญุฉ

1. **ููุณ ุงููุญู ูู ุฃูุงู ูุฎุชููุฉ** โ
   - ูููู ููููุชุด ุฃ ุฃู ูุฒูุฑ ูุญู ูู ุงูููู ุงูุฃูู
   - ููููู ููููุชุด ุจ ุฃู ูุฒูุฑ ููุณ ุงููุญู ูู ุงูููู ุงูุซุงูู

2. **ูุญูุงุช ูุฎุชููุฉ ูููุณ ุงูููุชุด** โ
   - ูููู ููููุชุด ุงููุงุญุฏ ุฒูุงุฑุฉ ุนุฏุฉ ูุญูุงุช ูู ููุณ ุงูููู

## โ ุงูุญุงูุงุช ุงูููููุนุฉ

1. **ููุณ ุงููุญู ูุนุฏุฉ ููุชุดูู ูู ููุณ ุงูููู** โ
   - ุญุชู ูู ูุงูุช ุงููุชุฑุงุช ูุฎุชููุฉ (ุตุจุงุญูุฉ/ูุณุงุฆูุฉ)
   - ุงูุชุญูู ูุชู ุนูู ูุณุชูู ุงูููู ุงููุงุญุฏ

## ๐งช ุงุฎุชุจุงุฑุงุช ุงูุฌูุฏุฉ

ุชู ุฅูุดุงุก ูุฌููุนุฉ ุดุงููุฉ ูู ุงูุงุฎุชุจุงุฑุงุช:

### `test_duplicate_validation.py`
- ุงุฎุชุจุงุฑ ุนุฏู ูุฌูุฏ ุชูุฑุงุฑุงุช โ
- ุงุฎุชุจุงุฑ ูุฌูุฏ ุชูุฑุงุฑุงุช ูู ููุณ ุงูููู โ
- ุงุฎุชุจุงุฑ ููุณ ุงููุญู ูู ุฃูุงู ูุฎุชููุฉ โ
- ุงุฎุชุจุงุฑ ุชูุฑุงุฑุงุช ูุชุนุฏุฏุฉ โ

### `test_merge_with_duplicates.py`
- ุงุฎุชุจุงุฑ ุชูุงูู ุงูุชุญูู ูุน ุนูููุฉ ุงูุฏูุฌ โ

### ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช
```bash
# ุงุฎุชุจุงุฑ ุฏุงูุฉ ุงูุชุญูู
python3 test_duplicate_validation.py

# ุงุฎุชุจุงุฑ ุงูุชูุงูู ูุน ุงูุฏูุฌ
python3 test_merge_with_duplicates.py

# ูุญุต ุงูุจูุงูุงุช ุงูุญุงููุฉ
python3 validate_plan.py
```

## ๐ ุงูููุงุฆุฏ

1. **ููุน ุงูุฃุฎุทุงุก ูุณุจูุงู**: ุงูุชุดุงู ุงููุดุงูู ูุจู ุชูููุฐ ุงูุฎุทุท
2. **ุชูููุฑ ุงูููุช**: ุนุฏู ุงูุญุงุฌุฉ ูููุญุต ุงููุฏูู
3. **ูุถูุญ ุงูุฃุฎุทุงุก**: ุฑุณุงุฆู ููุตูุฉ ุชุณุงุนุฏ ุนูู ุงูุชุตุญูุญ ุงูุณุฑูุน
4. **ุญูุงูุฉ ุงูุจูุงูุงุช**: ูุง ูุชู ุญูุธ ุงูุจูุงูุงุช ุงูุฎุงุทุฆุฉ
5. **ุซูุงุฆูุฉ ุงููุบุฉ**: ุฏุนู ูุงูู ููุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ

## ๐ ุงููููุงุช ุงููุถุงูุฉ

```
merge_plan_data.py              # ุชุญุฏูุซ: ุฅุถุงูุฉ ุฏุงูุฉ ุงูุชุญูู ูุงูุชูุงูู
validate_plan.py                # ุฌุฏูุฏ: ุฃุฏุงุฉ ุงูุชุญูู ุงููุณุชููุฉ
test_duplicate_validation.py    # ุฌุฏูุฏ: ุงุฎุชุจุงุฑุงุช ุงููุญุฏุฉ
test_merge_with_duplicates.py   # ุฌุฏูุฏ: ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู
DUPLICATE_VALIDATION_FEATURE.md # ุฌุฏูุฏ: ุงูุชูุซูู ุงูุดุงูู
DUPLICATE_VALIDATION_SUMMARY_AR.md # ูุฐุง ุงูููู
```

## ๐ง ุงูุชูุงุตูู ุงูุชูููุฉ

### ูุธููุฉ ุงูุชุญูู
```python
def validate_shop_duplicates(inspection_data):
    """
    ุชุชุญูู ูู ุนุฏู ุชุนููู ููุณ ุงููุญู ูุนุฏุฉ ููุชุดูู ูู ููุณ ุงูููู
    
    ุงููุฏุฎูุงุช:
        inspection_data: ูุงุฆูุฉ ุจุจูุงูุงุช ุงูุชูุชูุด
    
    ุงููุฎุฑุฌุงุช:
        (is_valid, duplicates)
        - is_valid: True ุฅุฐุง ูู ุชูุฌุฏ ุชูุฑุงุฑุงุช
        - duplicates: ูุงุฆูุฉ ุจุชูุงุตูู ุงูุชูุฑุงุฑุงุช
    """
```

### ุฎูุงุฑุฒููุฉ ุงููุญุต
1. ุชุฌููุน ุฌููุน ุงููุญูุงุช ุญุณุจ ุงูุชุงุฑูุฎ
2. ููู ุชุงุฑูุฎุ ุชุชุจุน ุฃู ุงูููุชุดูู ุชู ุชุนููููู ููู ูุญู
3. ุฅุฐุง ูุงู ุนุฏุฏ ุงูููุชุดูู ูููุญู ุฃูุซุฑ ูู 1ุ ููุณุฌู ูุชูุฑุงุฑ
4. ุฅุฑุฌุงุน ุงููุชุงุฆุฌ ูุน ุงูุชูุงุตูู

## ๐ ุงูุฏุนู

ูููุฒูุฏ ูู ุงููุนูููุงุชุ ุฑุงุฌุน:
- `DUPLICATE_VALIDATION_FEATURE.md` - ุงูุชูุซูู ุงูุดุงูู ุจุงูุฅูุฌููุฒูุฉ
- `merge_plan_data.py` - ููุฏ ุงูุชูููุฐ
- `validate_plan.py` - ุฃุฏุงุฉ ุงูุชุญูู

## ๐ฎ ุชุญุณููุงุช ูุณุชูุจููุฉ ูุญุชููุฉ

1. ูุงุฌูุฉ ููุจ ููุชุญูู ุงูููุฑู
2. ุงูุชุฑุงุญุงุช ุชููุงุฆูุฉ ููุญูุงุช ุจุฏููุฉ
3. ุชูุงุฑูุฑ ุฅุญุตุงุฆูุฉ ุนู ุงูุชูุฒูุน
4. ุฅุดุนุงุฑุงุช ูู ุงูููุช ุงููุนูู
5. API endpoint ููุชุญูู ูู ุงูุจูุงูุงุช
