<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø¥ØµÙ„Ø§Ø­ Ø±ÙØ¹ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªÙØªÙŠØ´ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 30px;
            max-width: 900px;
            margin: 0 auto;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #234085;
            border-bottom: 3px solid #234085;
            padding-bottom: 15px;
        }
        .test-section {
            margin: 25px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #234085;
        }
        .test-title {
            font-size: 1.1em;
            font-weight: bold;
            color: #234085;
            margin-bottom: 10px;
        }
        .test-result {
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
            font-weight: bold;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        button {
            background: #234085;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            margin: 5px;
        }
        button:hover {
            background: #1a2f5f;
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        code {
            background: #e9ecef;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        .checklist {
            margin: 15px 0;
        }
        .checklist-item {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 5px;
            display: flex;
            align-items: center;
        }
        .checklist-item::before {
            content: 'âœ“';
            display: inline-block;
            width: 25px;
            height: 25px;
            background: #28a745;
            color: white;
            text-align: center;
            line-height: 25px;
            border-radius: 50%;
            margin-left: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ Ø§Ø®ØªØ¨Ø§Ø± Ø¥ØµÙ„Ø§Ø­ Ø±ÙØ¹ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„ØªÙØªÙŠØ´ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ</h1>
        
        <div class="test-section">
            <div class="test-title">ğŸ“‹ Ù…Ù„Ø®Øµ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©</div>
            <div class="checklist">
                <div class="checklist-item">Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ØªÙˆÙƒÙ† Ù‚Ø¨Ù„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø±ÙØ¹</div>
                <div class="checklist-item">Ø¥Ø¶Ø§ÙØ© <code>mode: 'cors'</code> Ù„Ø¬Ù…ÙŠØ¹ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡Ø§Øª API</div>
                <div class="checklist-item">Ø¥Ø¶Ø§ÙØ© <code>credentials: 'omit'</code> Ù„ØªØ¬Ù†Ø¨ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø£Ù…Ø§Ù†</div>
                <div class="checklist-item">ØªØ­Ø³ÙŠÙ† Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£ Ù„ØªÙƒÙˆÙ† Ø£ÙƒØ«Ø± ÙˆØ¶ÙˆØ­Ø§Ù‹</div>
                <div class="checklist-item">Ù…Ø¹Ø§Ù„Ø¬Ø© Ø£ÙØ¶Ù„ Ù„Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø´Ø¨ÙƒÙŠØ©</div>
            </div>
        </div>

        <div class="test-section">
            <div class="test-title">ğŸ” Ø§Ø®ØªØ¨Ø§Ø± 1: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª ÙÙŠ Ø§Ù„ÙƒÙˆØ¯</div>
            <button onclick="testCodeChanges()">ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
            <div id="test1Result"></div>
        </div>

        <div class="test-section">
            <div class="test-title">ğŸŒ Ø§Ø®ØªØ¨Ø§Ø± 2: Ù…Ø­Ø§ÙƒØ§Ø© Ø§ØªØµØ§Ù„ GitHub API</div>
            <button onclick="testGitHubConnection()">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„</button>
            <div id="test2Result"></div>
        </div>

        <div class="test-section">
            <div class="test-title">âœ… Ø§Ø®ØªØ¨Ø§Ø± 3: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙƒÙˆÙŠÙ† CORS</div>
            <button onclick="testCORSConfiguration()">Ø§Ø®ØªØ¨Ø§Ø± CORS</button>
            <div id="test3Result"></div>
        </div>

        <div class="test-section">
            <div class="test-title">ğŸ“ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</div>
            <div id="finalResult" class="test-result info">
                Ù‚Ù… Ø¨ØªØ´ØºÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø£Ø¹Ù„Ø§Ù‡ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
            </div>
        </div>
    </div>

    <script>
        let passedTests = 0;
        let totalTests = 0;

        async function testCodeChanges() {
            const resultDiv = document.getElementById('test1Result');
            resultDiv.innerHTML = '<div class="test-result info">â³ Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„ÙƒÙˆØ¯...</div>';
            
            try {
                // Ø¬Ù„Ø¨ Ù…Ù„Ù index.html
                const response = await fetch('index.html');
                const htmlContent = await response.text();
                
                const checks = [
                    {
                        name: 'Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ ØªØ­Ù‚Ù‚ Ø§Ù„ØªÙˆÙƒÙ†',
                        test: htmlContent.includes('Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ØªÙˆÙƒÙ† Ø£ÙˆÙ„Ø§Ù‹')
                    },
                    {
                        name: 'Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ mode: cors ÙÙŠ uploadGroupInspectionReport',
                        test: htmlContent.match(/uploadGroupInspectionReport[\s\S]*?mode:\s*'cors'/g) && 
                              htmlContent.match(/uploadGroupInspectionReport[\s\S]*?mode:\s*'cors'/g).length >= 3
                    },
                    {
                        name: 'Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ credentials: omit',
                        test: htmlContent.match(/uploadGroupInspectionReport[\s\S]*?credentials:\s*'omit'/g) && 
                              htmlContent.match(/uploadGroupInspectionReport[\s\S]*?credentials:\s*'omit'/g).length >= 3
                    },
                    {
                        name: 'Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ­Ø³ÙŠÙ† Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£',
                        test: htmlContent.includes('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø®Ø§Ø¯Ù… GitHub')
                    },
                    {
                        name: 'Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† updateGroupReportsRegistry Ø¨Ù€ CORS',
                        test: htmlContent.match(/updateGroupReportsRegistry[\s\S]*?mode:\s*'cors'/g) && 
                              htmlContent.match(/updateGroupReportsRegistry[\s\S]*?mode:\s*'cors'/g).length >= 2
                    }
                ];
                
                let passed = 0;
                let results = '<div class="checklist">';
                
                checks.forEach(check => {
                    const status = check.test ? 'âœ“' : 'âœ—';
                    const color = check.test ? '#28a745' : '#dc3545';
                    results += `<div style="padding:8px;margin:5px 0;background:white;border-radius:5px;">
                        <span style="display:inline-block;width:25px;height:25px;background:${color};color:white;text-align:center;line-height:25px;border-radius:50%;margin-left:10px;font-weight:bold;">${status}</span>
                        ${check.name}
                    </div>`;
                    if (check.test) passed++;
                });
                
                results += '</div>';
                
                totalTests++;
                if (passed === checks.length) {
                    passedTests++;
                    resultDiv.innerHTML = `<div class="test-result success">âœ… Ø§Ø¬ØªØ§Ø² Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± (${passed}/${checks.length})</div>` + results;
                } else {
                    resultDiv.innerHTML = `<div class="test-result error">âŒ ÙØ´Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± (${passed}/${checks.length})</div>` + results;
                }
                
                updateFinalResult();
            } catch (error) {
                resultDiv.innerHTML = `<div class="test-result error">âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±: ${error.message}</div>`;
            }
        }

        async function testGitHubConnection() {
            const resultDiv = document.getElementById('test2Result');
            resultDiv.innerHTML = '<div class="test-result info">â³ Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ GitHub...</div>';
            
            try {
                const repo = 'aliabdelaal-adm/Monthly_inspection_plan';
                
                // Ø§Ø®ØªØ¨Ø§Ø± Ø§ØªØµØ§Ù„ Ø¨Ø³ÙŠØ· Ø¨Ø¯ÙˆÙ† ØªÙˆÙƒÙ† (Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø¹Ø§Ù…)
                const testRes = await fetch(`https://api.github.com/repos/${repo}`, {
                    method: 'GET',
                    headers: {
                        'Accept': 'application/vnd.github.v3+json'
                    },
                    mode: 'cors',
                    credentials: 'omit'
                });
                
                totalTests++;
                if (testRes.ok) {
                    passedTests++;
                    const data = await testRes.json();
                    resultDiv.innerHTML = `<div class="test-result success">
                        âœ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ GitHub Ù†Ø§Ø¬Ø­<br>
                        <small>Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹: ${data.full_name}<br>
                        Ø§Ù„Ø­Ø§Ù„Ø©: Ù†Ø´Ø·</small>
                    </div>`;
                } else {
                    resultDiv.innerHTML = `<div class="test-result error">
                        âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${testRes.status}<br>
                        <small>Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ GitHub</small>
                    </div>`;
                }
                
                updateFinalResult();
            } catch (error) {
                resultDiv.innerHTML = `<div class="test-result error">
                    âŒ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ GitHub<br>
                    <small>${error.message}</small><br>
                    <small>ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª</small>
                </div>`;
            }
        }

        async function testCORSConfiguration() {
            const resultDiv = document.getElementById('test3Result');
            resultDiv.innerHTML = '<div class="test-result info">â³ Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± ØªÙƒÙˆÙŠÙ† CORS...</div>';
            
            try {
                // Ø§Ø®ØªØ¨Ø§Ø± fetch Ù…Ø¹ CORS
                const testFetch = async (url) => {
                    return await fetch(url, {
                        method: 'GET',
                        mode: 'cors',
                        credentials: 'omit'
                    });
                };
                
                const testUrl = 'https://api.github.com/';
                const response = await testFetch(testUrl);
                
                totalTests++;
                if (response.ok) {
                    passedTests++;
                    resultDiv.innerHTML = `<div class="test-result success">
                        âœ… ØªÙƒÙˆÙŠÙ† CORS ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­<br>
                        <small>ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†Ø¬Ø§Ø­ Ø·Ù„Ø¨ CORS Ù…Ø¹ GitHub API</small>
                    </div>`;
                } else {
                    resultDiv.innerHTML = `<div class="test-result error">
                        âš ï¸ ØªØ­Ø°ÙŠØ±: Ø§Ø³ØªØ¬Ø§Ø¨Ø© ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹Ø© (${response.status})<br>
                        <small>Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ù‡Ù†Ø§Ùƒ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ ØªÙƒÙˆÙŠÙ† CORS</small>
                    </div>`;
                }
                
                updateFinalResult();
            } catch (error) {
                resultDiv.innerHTML = `<div class="test-result error">
                    âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± CORS<br>
                    <small>${error.message}</small>
                </div>`;
            }
        }

        function updateFinalResult() {
            const finalDiv = document.getElementById('finalResult');
            if (totalTests === 0) return;
            
            const percentage = Math.round((passedTests / totalTests) * 100);
            
            if (percentage === 100) {
                finalDiv.innerHTML = `<div class="test-result success">
                    âœ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù†Ø¬Ø­Øª! (${passedTests}/${totalTests})<br>
                    <strong>Ø§Ù„Ø¥ØµÙ„Ø§Ø­ ØªÙ… ØªØ·Ø¨ÙŠÙ‚Ù‡ Ø¨Ù†Ø¬Ø§Ø­ ÙˆÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¹Ù…Ù„ Ø±ÙØ¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø¢Ù† Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø§ÙƒÙ„</strong>
                </div>`;
            } else if (percentage >= 60) {
                finalDiv.innerHTML = `<div class="test-result info">
                    âš ï¸ Ø¨Ø¹Ø¶ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù†Ø¬Ø­Øª (${passedTests}/${totalTests}) - ${percentage}%<br>
                    <small>Ø§Ù„Ø¥ØµÙ„Ø§Ø­ Ù‚Ø¯ ÙŠØ¹Ù…Ù„ Ø¬Ø²Ø¦ÙŠØ§Ù‹ØŒ Ù‚Ø¯ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø£Ø¹Ù„Ø§Ù‡</small>
                </div>`;
            } else {
                finalDiv.innerHTML = `<div class="test-result error">
                    âŒ Ù…Ø¹Ø¸Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙØ´Ù„Øª (${passedTests}/${totalTests}) - ${percentage}%<br>
                    <small>ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¥ØµÙ„Ø§Ø­Ø§Øª ÙˆØ§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ·Ø¨ÙŠÙ‚Ù‡Ø§ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­</small>
                </div>`;
            }
        }
    </script>
</body>
</html>
