# دليل إدارة المحلات المتكامل
## Complete Shops Management Guide

---

## 🎯 نظرة عامة - Overview

يوفر النظام الآن إمكانيات كاملة لإدارة المحلات للمطورين، بما في ذلك:
- ✏️ تعديل مجمع للمحلات
- 📝 تحرير كل محل على حدة
- 🗑️ حذف أي محل
- ➕ إضافة محلات جديدة
- 💾 حفظ التغييرات إلى GitHub
- 🔄 تحديث البيانات من مصادر خارجية

---

## 🔐 المتطلبات - Requirements

### تسجيل الدخول كمطور
```
1. افتح الصفحة الرئيسية (index.html)
2. اختر "المطور" من قائمة تسجيل الدخول
3. أدخل كلمة المرور المطورة
4. سيتم تفعيل جميع صلاحيات الإدارة
```

---

## 📋 الميزات التفصيلية

### 1️⃣ عرض قائمة المحلات

**كيفية الوصول:**
```
إدارة خدمات النظام > 🏪 قائمة المحلات
```

**الإحصائيات المعروضة:**
- 📊 إجمالي المحلات: 114 محل
- 🗺️ عدد المناطق: 22 منطقة
- 🎯 أنواع الأنشطة: 6 أنواع
- ✅ المحلات المُفتَّشة: 96 محل

**الأدوات المتاحة:**
- 🔍 **بحث متقدم**: ابحث في أسماء المحلات
- 🔽 **تصنيف ذكي**: رتب حسب المناطق، الأبجدية، نوع النشاط
- 📊 **تصدير**: Excel أو PDF
- 📥 **تحميل**: من مصدر خارجي
- 📁 **رفع**: ملف محلات جديد

---

### 2️⃣ إضافة محل جديد ➕

**الخطوات:**
```
1. انقر على زر "➕ إضافة محل جديد"
2. أدخل البيانات المطلوبة:
   - اسم المحل (مطلوب)
   - المنطقة (اختر من القائمة)
   - نوع النشاط (اختياري)
3. انقر "حفظ"
4. سيظهر تحذير: ⚠️ "تذكر حفظ التغييرات إلى GitHub"
5. استخدم زر "💾 حفظ التغييرات" لتأكيد الإضافة
```

**مثال:**
```
الاسم: محل الورود للطيور
المنطقة: سوق الميناء
النشاط: محل طيور
```

---

### 3️⃣ تعديل محل واحد ✏️

**الخطوات:**
```
1. ابحث عن المحل في الجدول
2. انقر على زر "✏️" في عمود الإجراءات
3. عدّل البيانات المطلوبة
4. انقر "حفظ"
5. تأكد من حفظ التغييرات إلى GitHub
```

**الحقول القابلة للتعديل:**
- ✏️ اسم المحل
- 🗺️ المنطقة
- 🎯 نوع النشاط
- 📍 إحداثيات الموقع
- 📞 معلومات الاتصال

---

### 4️⃣ حذف محل 🗑️

**طريقة الحذف الفردي:**
```
1. ابحث عن المحل المراد حذفه
2. انقر على زر "🗑️" في عمود الإجراءات
3. أكد الحذف في نافذة التأكيد
4. احفظ التغييرات إلى GitHub
```

**تحذير:** ⚠️
- الحذف نهائي بعد الحفظ إلى GitHub
- تأكد من صحة المحل قبل الحذف
- يُنصح بتصدير نسخة احتياطية قبل الحذف المجمع

---

### 5️⃣ التعديل المجمع ✏️ (ميزة جديدة!)

**كيفية الاستخدام:**
```
1. انقر على زر "✏️ تعديل مجمع"
2. ستفتح نافذة جدول تفاعلية تعرض جميع المحلات (114 محل)
3. يمكنك الآن:
   
   أ. تعديل الأسماء:
      - انقر في حقل اسم المحل
      - عدّل النص مباشرة
      
   ب. تغيير المناطق:
      - افتح القائمة المنسدلة في عمود المنطقة
      - اختر المنطقة الجديدة
      
   ج. حذف عدة محلات:
      - ضع علامة ✓ في خانة "حذف"
      - يمكنك اختيار أكثر من محل للحذف
      
4. بعد الانتهاء من التعديلات:
   - انقر "✅ تطبيق التغييرات"
   - ستُطبق جميع التعديلات دفعة واحدة
   
5. لا تنسَ حفظ التغييرات إلى GitHub!
```

**مميزات التعديل المجمع:**
- ⚡ سرعة عالية في التعديل
- 📊 رؤية شاملة لجميع المحلات
- 🔄 تعديل عدة محلات في نفس الوقت
- ✓ حذف محلات متعددة بضغطة واحدة

**مثال عملي:**
```
السيناريو: تغيير منطقة 5 محلات من "محلات المولات" إلى "جزيرة ياس"

1. افتح التعديل المجمع
2. ابحث عن المحلات في الجدول
3. لكل محل:
   - افتح قائمة المنطقة
   - اختر "جزيرة ياس"
4. انقر "✅ تطبيق التغييرات"
5. احفظ إلى GitHub

✅ النتيجة: تم تحديث 5 محلات في أقل من دقيقة!
```

---

### 6️⃣ حفظ التغييرات إلى GitHub 💾 (ميزة جديدة!)

**الأهمية:**
```
⚠️ جميع التغييرات محلية حتى تضغط "حفظ التغييرات"
❌ بدون الحفظ، ستفقد التعديلات عند إعادة تحميل الصفحة
✅ الحفظ إلى GitHub يجعل التغييرات دائمة
```

**كيفية الحفظ:**
```
1. بعد إجراء أي تعديلات (إضافة، تعديل، حذف)
2. ستظهر رسالة تحذير: "⚠️ تذكر حفظ التغييرات"
3. انقر على زر "💾 حفظ التغييرات" (في أسفل المودال)
4. انتظر رسالة التأكيد:
   - ⏳ "جاري حفظ التغييرات إلى GitHub..."
   - ✅ "تم حفظ التغييرات بنجاح!"
   أو
   - ❌ "فشل الحفظ" (مع تفاصيل الخطأ)
```

**ماذا يحدث عند الحفظ:**
```
1. يجلب النظام محتوى plan-data.json الحالي
2. يحدّث قسم "shops" ببياناتك المعدلة
3. يرفع الملف المحدّث إلى GitHub
4. يحدّث SHA للإصدار الجديد
5. تصبح التغييرات مرئية لجميع المستخدمين
```

**معالجة الأخطاء:**
```javascript
// إذا فشل الحفظ، قد يكون السبب:
❌ "GitHub Token غير صالح" → تحقق من صلاحيات GitHub
❌ "فشل في جلب البيانات" → تحقق من اتصال الإنترنت
❌ "فشل في تحديث الملف" → قد يكون هناك تعارض، حاول مرة أخرى
```

---

### 7️⃣ رفع وتحميل الملفات 📤📥

**رفع ملف محلات:**
```
1. انقر "📁 رفع ملف المحلات"
2. اختر ملف من أحد الأنواع:
   - JSON (.json)
   - Excel (.xlsx, .xls)
   - CSV (.csv)
   - PDF (.pdf)
   - Text (.txt)
   - Word (.doc, .docx)
3. سيتم رفع الملف إلى:
   - المجلد: /files/documents/
   - السجل: files.json
```

**تحميل من مصدر خارجي:**
```
1. انقر "📥 تحميل من المصدر الخارجي"
2. أدخل رابط الملف (URL)
3. سيتم تحميل وتحليل البيانات
4. مراجعة البيانات المستوردة
5. تأكيد الاستيراد
6. احفظ إلى GitHub
```

---

## ⚠️ تحذيرات وملاحظات مهمة

### 1. حفظ التغييرات
```
⚠️ جميع التعديلات محلية حتى تحفظها إلى GitHub
❌ إعادة تحميل الصفحة بدون حفظ = فقدان التغييرات
✅ احفظ دائماً بعد كل تعديل مهم
```

### 2. الحذف النهائي
```
⚠️ حذف المحلات نهائي بعد الحفظ
✅ صدّر نسخة احتياطية قبل الحذف المجمع
✅ راجع المحلات المحددة للحذف قبل التطبيق
```

### 3. التعديل المجمع
```
⚠️ تعديلات كثيرة = احتمال أكبر للأخطاء
✅ راجع التغييرات قبل التطبيق
✅ عدّل مجموعات صغيرة في كل مرة
```

### 4. صلاحيات المطور
```
⚠️ جميع هذه الميزات متاحة للمطورين فقط
❌ المستخدمون العاديون لا يمكنهم التعديل
✅ احمِ كلمة مرور المطور
```

---

## 🔥 أمثلة عملية

### مثال 1: إضافة محل جديد
```
الهدف: إضافة محل "عالم الطيور" في سوق التراث

1. ✅ افتح قائمة المحلات
2. ✅ انقر "➕ إضافة محل جديد"
3. ✅ املأ البيانات:
      الاسم: عالم الطيور
      المنطقة: سوق التراث
      النشاط: محل طيور
4. ✅ احفظ المحل
5. ✅ احفظ التغييرات إلى GitHub
6. ✅ تحقق من ظهور المحل في القائمة

النتيجة: ✅ تمت الإضافة بنجاح!
```

### مثال 2: تعديل منطقة عدة محلات
```
الهدف: نقل 10 محلات من "الخالدية" إلى "البطين"

1. ✅ افتح قائمة المحلات
2. ✅ انقر "✏️ تعديل مجمع"
3. ✅ ابحث عن محلات "الخالدية"
4. ✅ لكل محل من الـ10:
      - افتح قائمة المنطقة
      - اختر "البطين"
5. ✅ انقر "✅ تطبيق التغييرات"
6. ✅ احفظ إلى GitHub

النتيجة: ✅ تم تحديث 10 محلات في دقيقتين!
```

### مثال 3: حذف محلات مكررة
```
الهدف: حذف 3 محلات مكررة

1. ✅ افتح قائمة المحلات
2. ✅ انقر "✏️ تعديل مجمع"
3. ✅ حدد المحلات المكررة
4. ✅ ضع علامة ✓ في خانة "حذف" لكل منها
5. ✅ راجع المحلات المحددة
6. ✅ انقر "✅ تطبيق التغييرات"
7. ✅ أكد الحذف
8. ✅ احفظ إلى GitHub

النتيجة: ✅ تم حذف المحلات المكررة بنجاح!
```

---

## 🎓 نصائح للاستخدام الأمثل

### 1. النسخ الاحتياطي
```
✅ قبل أي تعديل كبير:
   1. انقر "📊 Excel" لتصدير البيانات الحالية
   2. احفظ الملف في مكان آمن
   3. الآن يمكنك التعديل بأمان
```

### 2. التنظيم
```
✅ استخدم البحث والفلتر للوصول السريع
✅ رتب المحلات حسب المنطقة قبل التعديل المجمع
✅ اجمع العمليات المتشابهة معاً
```

### 3. التحقق
```
✅ بعد كل حفظ إلى GitHub:
   1. أعد تحميل الصفحة
   2. افتح قائمة المحلات
   3. تحقق من ظهور التعديلات
```

### 4. الكفاءة
```
✅ للتعديلات الفردية: استخدم زر ✏️ المباشر
✅ للتعديلات المتعددة: استخدم التعديل المجمع
✅ للحذف المجمع: استخدم التعديل المجمع مع خانات الاختيار
```

---

## 🆘 حل المشاكل الشائعة

### مشكلة: لا يظهر زر "حفظ التغييرات"
```
السبب: لم تسجل دخول كمطور
الحل:
  1. اختر "المطور" من قائمة تسجيل الدخول
  2. أدخل كلمة المرور
  3. أعد فتح قائمة المحلات
```

### مشكلة: فشل الحفظ إلى GitHub
```
الأسباب المحتملة:
  ❌ GitHub Token منتهي الصلاحية
  ❌ انقطاع الاتصال بالإنترنت
  ❌ تعارض في الإصدارات

الحل:
  1. تحقق من اتصال الإنترنت
  2. حاول مرة أخرى بعد دقيقة
  3. إذا استمرت المشكلة، اتصل بالدعم الفني
```

### مشكلة: اختفت التعديلات بعد إعادة التحميل
```
السبب: لم تحفظ التغييرات إلى GitHub
الحل:
  ⚠️ للأسف، التعديلات ضائعة
  ✅ في المرة القادمة، احفظ دائماً قبل إغلاق الصفحة
```

---

## 📞 الدعم

إذا واجهت أي مشاكل أو كانت لديك أسئلة:
- 📧 البريد الإلكتروني: support@example.com
- 💬 الدردشة المباشرة: متاحة في أوقات العمل
- 📚 التوثيق الكامل: راجع ملفات .md في المستودع

---

## ✅ الخلاصة

**الميزات الرئيسية:**
- ✏️ تعديل مجمع سريع وفعّال
- 💾 حفظ مباشر إلى GitHub
- ➕ إضافة محلات جديدة بسهولة
- 🗑️ حذف فردي أو مجمع
- 📤 رفع وتحميل الملفات
- ⚠️ مؤشرات واضحة للتغييرات

**تذكر دائماً:**
1. ✅ احفظ بعد كل تعديل مهم
2. ✅ راجع قبل الحذف المجمع
3. ✅ صدّر نسخة احتياطية قبل التعديلات الكبيرة
4. ✅ تحقق من النتائج بعد الحفظ

---

**آخر تحديث:** 2025-01-15
**الإصدار:** 2.0
**المطور:** د. علي عبدالعال
