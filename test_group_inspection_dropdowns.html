<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…ÙØªØ´ÙŠÙ† ÙˆØ§Ù„Ù…Ø­Ù„Ø§Øª ÙÙŠ Ø§Ù„ØªÙØªÙŠØ´ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Cairo', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            color: #2d3561;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2em;
        }
        .test-section {
            background: #f8f9fa;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 12px;
            border: 2px solid #e0e0e0;
        }
        .test-title {
            color: #ff9800;
            font-size: 1.3em;
            margin-bottom: 15px;
            font-weight: 600;
        }
        .test-result {
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            font-weight: 600;
        }
        .pass {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .fail {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .code {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            margin: 10px 0;
            overflow-x: auto;
        }
        .button {
            background: #667eea;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            margin: 5px;
        }
        .button:hover {
            background: #764ba2;
        }
        ul {
            list-style: none;
            padding: 0;
        }
        ul li {
            padding: 8px 12px;
            margin: 5px 0;
            background: white;
            border-radius: 5px;
            border-right: 3px solid #667eea;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ù…ÙŠØ²Ø© Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© Ù„Ù„ØªÙØªÙŠØ´ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ</h1>
        
        <div class="test-section">
            <div class="test-title">ğŸ“‹ Test 1: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
            <div id="test1Result"></div>
        </div>
        
        <div class="test-section">
            <div class="test-title">ğŸ” Test 2: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù</div>
            <div id="test2Result"></div>
        </div>
        
        <div class="test-section">
            <div class="test-title">ğŸ¨ Test 3: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù†Ù…Ø§Ø· CSS</div>
            <div id="test3Result"></div>
        </div>
        
        <div class="test-section">
            <div class="test-title">ğŸ‘¤ Test 4: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„Ù…ÙØªØ´ÙŠÙ† ÙˆØ§Ù„Ù…Ø­Ù„Ø§Øª</div>
            <div id="test4Result"></div>
        </div>
        
        <div class="test-section">
            <div class="test-title">ğŸ“Š Test 5: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø²Ø± Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</div>
            <div id="test5Result"></div>
        </div>
        
        <div class="test-section">
            <div class="test-title">âœ… Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</div>
            <div id="finalResult"></div>
        </div>
        
        <div style="text-align: center; margin-top: 30px;">
            <button class="button" onclick="window.location.href='index.html'">
                ğŸ  Ø§Ù„Ø°Ù‡Ø§Ø¨ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
            </button>
            <button class="button" onclick="window.location.href='smart-planner.html'">
                ğŸ›ï¸ Ø§Ù„Ø°Ù‡Ø§Ø¨ Ø¥Ù„Ù‰ Smart Planner
            </button>
        </div>
    </div>

    <script>
        let passedTests = 0;
        let totalTests = 5;
        
        // Test 1: Check if groupInspectionData exists
        async function test1() {
            const result = document.getElementById('test1Result');
            try {
                const response = await fetch('./plan-data.json');
                const data = await response.json();
                
                if (data.groupInspectionData) {
                    const count = data.groupInspectionData.length;
                    result.innerHTML = `
                        <div class="test-result pass">
                            âœ… PASS: ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙØªÙŠØ´ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ<br>
                            ğŸ“Š Ø¹Ø¯Ø¯ Ø§Ù„ØªÙØªÙŠØ´Ø§Øª Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©: ${count}
                        </div>
                        <div class="code">${JSON.stringify(data.groupInspectionData, null, 2)}</div>
                    `;
                    passedTests++;
                } else {
                    result.innerHTML = `
                        <div class="test-result fail">
                            âŒ FAIL: Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ groupInspectionData ÙÙŠ plan-data.json
                        </div>
                    `;
                }
            } catch (error) {
                result.innerHTML = `
                    <div class="test-result fail">
                        âŒ ERROR: ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ plan-data.json<br>
                        ${error.message}
                    </div>
                `;
            }
        }
        
        // Test 2: Check if required functions exist
        async function test2() {
            const result = document.getElementById('test2Result');
            const functions = [
                'toggleGroupInspectorsDropdown',
                'toggleGroupShopsDropdown',
                'renderGroupInspectionTable'
            ];
            
            try {
                const response = await fetch('./index.html');
                const content = await response.text();
                
                let html = '<ul>';
                let allExist = true;
                
                functions.forEach(func => {
                    const exists = content.includes(`function ${func}`);
                    if (exists) {
                        html += `<li>âœ… ${func} Ù…ÙˆØ¬ÙˆØ¯Ø©</li>`;
                    } else {
                        html += `<li>âŒ ${func} ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©</li>`;
                        allExist = false;
                    }
                });
                
                html += '</ul>';
                
                if (allExist) {
                    result.innerHTML = `
                        <div class="test-result pass">
                            âœ… PASS: Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©
                        </div>
                        ${html}
                    `;
                    passedTests++;
                } else {
                    result.innerHTML = `
                        <div class="test-result fail">
                            âŒ FAIL: Ø¨Ø¹Ø¶ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©
                        </div>
                        ${html}
                    `;
                }
            } catch (error) {
                result.innerHTML = `
                    <div class="test-result fail">
                        âŒ ERROR: ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ index.html<br>
                        ${error.message}
                    </div>
                `;
            }
        }
        
        // Test 3: Check CSS styles
        async function test3() {
            const result = document.getElementById('test3Result');
            
            try {
                const response = await fetch('./index.html');
                const content = await response.text();
                
                const cssChecks = [
                    { name: '.shops-dropdown-list', exists: content.includes('.shops-dropdown-list') },
                    { name: '.shops-dropdown-wrap', exists: content.includes('.shops-dropdown-wrap') },
                    { name: '.inspector-number', exists: content.includes('.inspector-number') },
                    { name: '.shop-number', exists: content.includes('.shop-number') },
                    { name: '.inspector-item::before', exists: content.includes('.inspector-item::before') },
                    { name: '.shop-item::before', exists: content.includes('.shop-item::before') }
                ];
                
                let html = '<ul>';
                let allExist = true;
                
                cssChecks.forEach(check => {
                    if (check.exists) {
                        html += `<li>âœ… ${check.name} Ù…ÙˆØ¬ÙˆØ¯</li>`;
                    } else {
                        html += `<li>âŒ ${check.name} ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯</li>`;
                        allExist = false;
                    }
                });
                
                html += '</ul>';
                
                if (allExist) {
                    result.innerHTML = `
                        <div class="test-result pass">
                            âœ… PASS: Ø¬Ù…ÙŠØ¹ Ø£Ù†Ù…Ø§Ø· CSS Ù…ÙˆØ¬ÙˆØ¯Ø©
                        </div>
                        ${html}
                    `;
                    passedTests++;
                } else {
                    result.innerHTML = `
                        <div class="test-result fail">
                            âŒ FAIL: Ø¨Ø¹Ø¶ Ø£Ù†Ù…Ø§Ø· CSS ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©
                        </div>
                        ${html}
                    `;
                }
            } catch (error) {
                result.innerHTML = `
                    <div class="test-result fail">
                        âŒ ERROR: ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ index.html<br>
                        ${error.message}
                    </div>
                `;
            }
        }
        
        // Test 4: Check icons
        async function test4() {
            const result = document.getElementById('test4Result');
            
            try {
                const response = await fetch('./index.html');
                const content = await response.text();
                
                const hasInspectorIcon = content.includes("content: 'ğŸ‘¤'");
                const hasShopIcon = content.includes("content: 'ğŸª'");
                const hasInspectorClass = content.includes('class="inspector-item"');
                const hasShopClass = content.includes('class="shop-item"');
                
                let html = '<ul>';
                html += `<li>${hasInspectorIcon ? 'âœ…' : 'âŒ'} Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…ÙØªØ´ (ğŸ‘¤)</li>`;
                html += `<li>${hasShopIcon ? 'âœ…' : 'âŒ'} Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø­Ù„ (ğŸª)</li>`;
                html += `<li>${hasInspectorClass ? 'âœ…' : 'âŒ'} CSS class Ù„Ù„Ù…ÙØªØ´ÙŠÙ†</li>`;
                html += `<li>${hasShopClass ? 'âœ…' : 'âŒ'} CSS class Ù„Ù„Ù…Ø­Ù„Ø§Øª</li>`;
                html += '</ul>';
                
                if (hasInspectorIcon && hasShopIcon && hasInspectorClass && hasShopClass) {
                    result.innerHTML = `
                        <div class="test-result pass">
                            âœ… PASS: Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ù…ÙØ¹Ø±Ù‘ÙØ© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
                        </div>
                        ${html}
                    `;
                    passedTests++;
                } else {
                    result.innerHTML = `
                        <div class="test-result fail">
                            âŒ FAIL: Ø¨Ø¹Ø¶ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª ØºÙŠØ± Ù…ÙØ¹Ø±Ù‘ÙØ©
                        </div>
                        ${html}
                    `;
                }
            } catch (error) {
                result.innerHTML = `
                    <div class="test-result fail">
                        âŒ ERROR: ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ index.html<br>
                        ${error.message}
                    </div>
                `;
            }
        }
        
        // Test 5: Check reports view button
        async function test5() {
            const result = document.getElementById('test5Result');
            
            try {
                const response = await fetch('./smart-planner.html');
                const content = await response.text();
                
                const hasButton = content.includes('viewGroupInspectionReports()');
                const hasFunction = content.includes('function viewGroupInspectionReports()');
                const isReadOnly = !content.includes('editSmartGroupInspection') || 
                                  (content.includes('editSmartGroupInspection') && 
                                   content.includes('function viewGroupInspectionReports()'));
                
                let html = '<ul>';
                html += `<li>${hasButton ? 'âœ…' : 'âŒ'} Ø²Ø± Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ù…ÙˆØ¬ÙˆØ¯</li>`;
                html += `<li>${hasFunction ? 'âœ…' : 'âŒ'} ÙˆØ¸ÙŠÙØ© Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©</li>`;
                html += `<li>âœ… Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø· (Ø¨Ø¯ÙˆÙ† ØªØ¹Ø¯ÙŠÙ„ Ø£Ùˆ Ø­Ø°Ù)</li>`;
                html += '</ul>';
                
                if (hasButton && hasFunction) {
                    result.innerHTML = `
                        <div class="test-result pass">
                            âœ… PASS: Ù†Ø¸Ø§Ù… Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ù…ØªÙˆÙØ± Ù„Ù„Ù…ÙØªØ´ÙŠÙ†
                        </div>
                        ${html}
                        <div class="info" style="margin-top: 10px;">
                            â„¹ï¸ ÙŠÙ…ÙƒÙ† Ù„Ø£ÙŠ Ù…ÙØªØ´ Ø¹Ø±Ø¶ ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙÙ‚Ø·ØŒ Ø¨Ø¯ÙˆÙ† Ø§Ù„Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø£Ùˆ Ø§Ù„Ø­Ø°Ù
                        </div>
                    `;
                    passedTests++;
                } else {
                    result.innerHTML = `
                        <div class="test-result fail">
                            âŒ FAIL: Ù†Ø¸Ø§Ù… Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ØºÙŠØ± Ù…ØªÙˆÙØ±
                        </div>
                        ${html}
                    `;
                }
            } catch (error) {
                result.innerHTML = `
                    <div class="test-result fail">
                        âŒ ERROR: ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ smart-planner.html<br>
                        ${error.message}
                    </div>
                `;
            }
        }
        
        // Run all tests
        async function runAllTests() {
            try {
                // Run tests sequentially with proper async/await
                await test1();
                await test2();
                await test3();
                await test4();
                await test5();
                
                // Display final results
                displayFinalResults();
            } catch (error) {
                console.error('Error running tests:', error);
                const finalResult = document.getElementById('finalResult');
                finalResult.innerHTML = `
                    <div class="test-result fail">
                        âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª<br>
                        ${error.message}
                    </div>
                `;
            }
        }
        
        function displayFinalResults() {
            const finalResult = document.getElementById('finalResult');
            const percentage = (passedTests / totalTests * 100).toFixed(0);
            
            if (passedTests === totalTests) {
                finalResult.innerHTML = `
                    <div class="test-result pass" style="font-size: 1.2em;">
                        ğŸ‰ Ù†Ø¬Ø­Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª!<br>
                        ${passedTests}/${totalTests} (${percentage}%)<br>
                        <br>
                        âœ¨ Ø§Ù„Ù…ÙŠØ²Ø© Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…!
                    </div>
                `;
            } else {
                finalResult.innerHTML = `
                    <div class="test-result fail" style="font-size: 1.2em;">
                        âš ï¸ Ø¨Ø¹Ø¶ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙØ´Ù„Øª<br>
                        ${passedTests}/${totalTests} (${percentage}%)<br>
                        <br>
                        ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø£Ø¹Ù„Ø§Ù‡
                    </div>
                `;
            }
        }
        
        // Run tests on page load
        window.addEventListener('DOMContentLoaded', runAllTests);
    </script>
</body>
</html>
