# دليل ميزات إدارة المناطق الكاملة - Smart Planner

## نظرة عامة

تم تفعيل جميع ميزات إدارة المناطق في أداة التخطيط الذكية (Smart Planner). الآن يمكنك استخدام جميع الأزرار التالية بشكل كامل وفعّال:

- ✅ **تحديث القائمة** - يعمل بالفعل
- ✅ **ترتيب أبجدياً** - يعمل بالفعل  
- ✅ **دمج مناطق** - تم تفعيله بالكامل
- ✅ **تعيين المحلات** - تم تفعيله بالكامل
- ✅ **تعديل جماعي** - تم تفعيله بالكامل

---

## 1. تحديث القائمة (🔄)

### الوصف
يقوم بتحديث قائمة المناطق من GitHub وإعادة عرضها.

### كيفية الاستخدام
1. انقر على زر "🔄 تحديث القائمة"
2. ستظهر رسالة "جاري تحديث البيانات..."
3. بعد انتهاء التحديث ستظهر رسالة "تم تحديث القائمة بنجاح"

### الميزات
- يحمل أحدث البيانات من GitHub
- يحدث العرض تلقائياً
- يحدث الإحصائيات (عدد المناطق، عدد المحلات)

---

## 2. ترتيب أبجدياً (🔤)

### الوصف
يرتب المناطق حسب الترتيب الأبجدي العربي.

### كيفية الاستخدام
1. انقر على زر "🔤 ترتيب أبجدياً"
2. ستظهر رسالة "تم ترتيب المناطق أبجدياً"
3. ستلاحظ أن القائمة تم ترتيبها من الألف إلى الياء

### الميزات
- يستخدم `localeCompare` للغة العربية
- الترتيب الصحيح للحروف العربية
- لا يحتاج إلى حفظ (الترتيب للعرض فقط)

---

## 3. دمج مناطق (🔗)

### الوصف
يتيح لك دمج منطقتين أو أكثر في منطقة واحدة. تُنقل جميع المحلات تلقائياً وتُحدث التفتيشات.

### كيفية الاستخدام

#### الخطوة 1: فتح نافذة الدمج
1. انقر على زر "🔗 دمج مناطق"
2. ستظهر نافذة منبثقة بعنوان "دمج المناطق"

#### الخطوة 2: اختيار المنطقة الرئيسية
1. من القائمة المنسدلة "المنطقة الرئيسية"
2. اختر المنطقة التي تريد الدمج فيها
3. هذه المنطقة ستبقى وستستقبل جميع المحلات

#### الخطوة 3: اختيار المناطق المراد دمجها
1. حدد صندوق (✓) بجانب كل منطقة تريد دمجها
2. يمكنك اختيار منطقة واحدة أو عدة مناطق
3. عدد المحلات في كل منطقة معروض بجانب الاسم

#### الخطوة 4: تنفيذ الدمج
1. انقر على زر "🔗 تنفيذ الدمج"
2. ستظهر رسالة تأكيد تحتوي على:
   - أسماء المناطق المراد دمجها
   - اسم المنطقة الرئيسية
   - تحذير بأن العملية لا يمكن التراجع عنها
3. اضغط "موافق" لتأكيد العملية

#### النتيجة
- ✅ نقل جميع المحلات إلى المنطقة الرئيسية
- ✅ تحديث جميع التفتيشات لتعكس المنطقة الجديدة
- ✅ حذف المناطق المدمجة
- ✅ حفظ التغييرات على GitHub تلقائياً
- ✅ عرض تقرير بعدد المحلات والتفتيشات المحدثة

### مثال عملي
```
المناطق قبل الدمج:
- منطقة الخالدية (5 محلات)
- منطقة الشامخة (3 محلات)
- منطقة الزاهية (2 محلات)

إجراء الدمج:
- المنطقة الرئيسية: منطقة الخالدية
- المناطق المراد دمجها: منطقة الشامخة + منطقة الزاهية

النتيجة:
- منطقة الخالدية (10 محلات)
- تم حذف: منطقة الشامخة، منطقة الزاهية
```

### تحذيرات
⚠️ **هام جداً:**
- لا يمكن التراجع عن هذه العملية
- تأكد من اختيار المنطقة الرئيسية الصحيحة
- راجع المناطق المحددة قبل التنفيذ
- سيتم حذف المناطق المدمجة نهائياً

---

## 4. تعيين المحلات (📍)

### الوصف
يتيح لك نقل محل واحد أو عدة محلات من منطقة إلى أخرى.

### كيفية الاستخدام

#### الخطوة 1: فتح نافذة التعيين
1. انقر على زر "📍 تعيين المحلات"
2. ستظهر نافذة منبثقة بعنوان "تعيين المحلات للمناطق"

#### الخطوة 2: فلترة المحلات (اختياري)
1. من القائمة "المنطقة الحالية" يمكنك:
   - اختيار "جميع المناطق" لعرض كل المحلات
   - أو اختيار منطقة معينة لعرض محلاتها فقط
2. استخدم صندوق البحث للبحث عن محل معين

#### الخطوة 3: اختيار المنطقة الجديدة
1. من القائمة "المنطقة الجديدة"
2. اختر المنطقة التي تريد نقل المحلات إليها

#### الخطوة 4: تحديد المحلات
1. حدد صندوق (✓) بجانب كل محل تريد نقله
2. يمكنك استخدام:
   - "✓ تحديد الكل" - لتحديد جميع المحلات المعروضة
   - "✕ إلغاء التحديد" - لإلغاء جميع التحديدات
3. المنطقة الحالية لكل محل معروضة بجانب اسمه

#### الخطوة 5: تنفيذ التعيين
1. انقر على زر "📍 تعيين المحلات"
2. ستظهر رسالة تأكيد
3. اضغط "موافق" للتأكيد

#### النتيجة
- ✅ تحديث منطقة المحلات المحددة
- ✅ تحديث التفتيشات المرتبطة
- ✅ حفظ التغييرات على GitHub تلقائياً
- ✅ تحديث العرض في جدول المحلات

### مثال عملي
```
الحالة الأولية:
- محل الطيور (منطقة الخالدية)
- محل الأسماك (منطقة الخالدية)

إجراء التعيين:
- تحديد: محل الطيور
- المنطقة الجديدة: منطقة الشامخة

النتيجة:
- محل الطيور (منطقة الشامخة) ← تم النقل
- محل الأسماك (منطقة الخالدية) ← لم يتغير
```

### ميزات إضافية
- **البحث الذكي**: يمكنك البحث عن المحلات أثناء التحديد
- **الفلترة**: فلترة المحلات حسب المنطقة الحالية
- **التحديد السريع**: تحديد/إلغاء تحديد الكل بنقرة واحدة
- **العرض الواضح**: المنطقة الحالية معروضة بوضوح لكل محل

---

## 5. تعديل جماعي (✏️)

### الوصف
يتيح لك تعديل أسماء عدة مناطق في نفس الوقت باستخدام قواعد موحدة.

### كيفية الاستخدام

#### الخطوة 1: فتح نافذة التعديل
1. انقر على زر "✏️ تعديل جماعي"
2. ستظهر نافذة منبثقة بعنوان "التعديل الجماعي للمناطق"

#### الخطوة 2: تحديد المناطق
1. حدد صندوق (✓) بجانب كل منطقة تريد تعديلها
2. يمكنك استخدام:
   - "✓ تحديد الكل" - لتحديد جميع المناطق
   - "✕ إلغاء التحديد" - لإلغاء جميع التحديدات
3. عدد المحلات في كل منطقة معروض بجانب الاسم

#### الخطوة 3: اختيار نوع التعديل

##### أ) إضافة بادئة (Prefix)
1. اختر "إضافة بادئة للأسماء" من القائمة
2. أدخل البادئة المطلوبة (مثل: "منطقة")
3. مثال: "الخالدية" ← "منطقة الخالدية"

##### ب) إضافة لاحقة (Suffix)
1. اختر "إضافة لاحقة للأسماء" من القائمة
2. أدخل اللاحقة المطلوبة (مثل: "الجديدة")
3. مثال: "الخالدية" ← "الخالدية الجديدة"

##### ج) استبدال نص (Replace)
1. اختر "استبدال نص في الأسماء" من القائمة
2. أدخل النص القديم (مثل: "منطقة")
3. أدخل النص الجديد (مثل: "حي")
4. مثال: "منطقة الخالدية" ← "حي الخالدية"

#### الخطوة 4: معاينة التغييرات
1. انقر على زر "👁️ معاينة التغييرات"
2. ستظهر قائمة بكل التغييرات المقترحة:
   - القديم: [الاسم الحالي]
   - الجديد: [الاسم الجديد]
3. راجع التغييرات بعناية

#### الخطوة 5: تنفيذ التعديل
1. انقر على زر "✏️ تنفيذ التعديل"
2. ستظهر رسالة تأكيد
3. اضغط "موافق" للتأكيد

#### النتيجة
- ✅ تحديث أسماء المناطق المحددة
- ✅ تحديث التفتيشات لتعكس الأسماء الجديدة
- ✅ حفظ التغييرات على GitHub تلقائياً
- ✅ تحديث العرض في الجدول

### أمثلة عملية

#### مثال 1: إضافة بادئة
```
المناطق الأصلية:
- الخالدية
- الشامخة
- الزاهية

التعديل: إضافة بادئة "منطقة"

النتيجة:
- منطقة الخالدية
- منطقة الشامخة
- منطقة الزاهية
```

#### مثال 2: استبدال نص
```
المناطق الأصلية:
- منطقة الخالدية
- منطقة الشامخة

التعديل: استبدال "منطقة" بـ "حي"

النتيجة:
- حي الخالدية
- حي الشامخة
```

#### مثال 3: إضافة لاحقة
```
المناطق الأصلية:
- الخالدية
- الشامخة

التعديل: إضافة لاحقة "الجديدة"

النتيجة:
- الخالدية الجديدة
- الشامخة الجديدة
```

### ميزات إضافية
- **المعاينة**: راجع جميع التغييرات قبل التنفيذ
- **التحديد السريع**: حدد/ألغِ تحديد جميع المناطق بسرعة
- **التحديث التلقائي**: يتم تحديث التفتيشات تلقائياً
- **التنسيق الصحيح**: يتم إضافة المسافات تلقائياً بين الكلمات

---

## نصائح وأفضل الممارسات

### 1. النسخ الاحتياطي
✅ قبل إجراء عمليات كبيرة (مثل الدمج)، استخدم زر "💾 نسخة احتياطية"

### 2. المراجعة
✅ راجع دائماً البيانات قبل الحفظ النهائي
✅ استخدم ميزة "المعاينة" في التعديل الجماعي

### 3. التدرج
✅ ابدأ بعمليات صغيرة لفهم الميزات
✅ جرب على منطقة واحدة أولاً

### 4. التوثيق
✅ احتفظ بسجل للتغييرات الكبيرة
✅ استخدم أسماء واضحة للمناطق

### 5. التحقق
✅ بعد أي عملية، تحقق من:
   - عدد المحلات في كل منطقة
   - التفتيشات المرتبطة
   - الإحصائيات العامة

---

## استكشاف الأخطاء

### "لا توجد مناطق متاحة"
**الحل**: تأكد من تسجيل الدخول وتحميل البيانات

### "يرجى اختيار المنطقة الرئيسية"
**الحل**: في عملية الدمج، يجب اختيار منطقة رئيسية أولاً

### "لا يمكن دمج المنطقة في نفسها"
**الحل**: لا تحدد المنطقة الرئيسية ضمن المناطق المراد دمجها

### "فشل الحفظ"
**الحل**: 
1. تحقق من اتصال الإنترنت
2. تأكد من صحة GitHub Token
3. تحقق من صلاحيات الوصول

---

## الدعم الفني

إذا واجهت أي مشاكل:
1. تحقق من وجود رسائل خطأ في الكونسول (F12)
2. جرب تحديث الصفحة وإعادة المحاولة
3. تأكد من تسجيل الدخول بشكل صحيح
4. اتصل بالدعم الفني مع تفاصيل المشكلة

---

## ملاحظات هامة

⚠️ **تحذيرات**:
- جميع العمليات تُحفظ على GitHub مباشرة
- عمليات الدمج والحذف لا يمكن التراجع عنها
- تأكد من مراجعة البيانات قبل التنفيذ

✅ **مميزات**:
- جميع الميزات تعمل بشكل ذكي ومتكامل
- التحديثات التلقائية للبيانات المرتبطة
- واجهة سهلة الاستخدام باللغة العربية
- رسائل واضحة لكل عملية

---

## تاريخ التحديثات

**الإصدار 2.1.0** - 2025-10-21
- ✅ تفعيل ميزة دمج المناطق
- ✅ تفعيل ميزة تعيين المحلات
- ✅ تفعيل ميزة التعديل الجماعي
- ✅ إضافة معاينة التغييرات
- ✅ تحسين الواجهة والتجربة

---

تم إعداد هذا الدليل بواسطة: فريق التطوير
آخر تحديث: 21 أكتوبر 2025
